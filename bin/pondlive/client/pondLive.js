(()=>{var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function t(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var n={},r={},i=e.parcelRequire6aea;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){r[e]=t},e.parcelRequire6aea=i),i.register("5jAh8",(function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}})),i.register("8IqCp",(function(e,t){(t=e.exports=i("kZTRI")).Stream=t,t.Readable=t,t.Writable=i("gihud"),t.Duplex=i("jqAKP"),t.Transform=i("erC5i"),t.PassThrough=i("3dCe5"),t.finished=i("j5ZwK"),t.pipeline=i("azGNy")})),i.register("kZTRI",(function(t,n){"use strict";var r,o=i("ePtPP");t.exports=O,O.ReadableState=R;i("3oV8N").EventEmitter;var s=function(e,t){return e.listeners(t).length},a=i("3vqBO"),c=i("bqBrJ").Buffer,u=e.Uint8Array||function(){};var l,h=i("1DJXa");l=h&&h.debuglog?h.debuglog("stream"):function(){};var f,d,p,b=i("k9Eb1"),y=i("6hWXN"),g=i("56mX2").getHighWaterMark,v=i("aOgJu").codes,m=v.ERR_INVALID_ARG_TYPE,_=v.ERR_STREAM_PUSH_AFTER_EOF,w=v.ERR_METHOD_NOT_IMPLEMENTED,E=v.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;i("5jAh8")(O,a);var S=y.errorOrDestroy,A=["error","close","destroy","pause","resume"];function R(e,t,n){r=r||i("jqAKP"),e=e||{},"boolean"!=typeof n&&(n=t instanceof r),this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=g(this,e,"readableHighWaterMark",n),this.buffer=new b,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(f||(f=i("28kcI").StringDecoder),this.decoder=new f(e.encoding),this.encoding=e.encoding)}function O(e){if(r=r||i("jqAKP"),!(this instanceof O))return new O(e);var t=this instanceof r;this._readableState=new R(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),a.call(this)}function x(e,t,n,r,i){l("readableAddChunk",t);var o,s=e._readableState;if(null===t)s.reading=!1,function(e,t){if(l("onEofChunk"),t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?k(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,P(e)))}(e,s);else if(i||(o=function(e,t){var n;r=t,c.isBuffer(r)||r instanceof u||"string"==typeof t||void 0===t||e.objectMode||(n=new m("chunk",["string","Buffer","Uint8Array"],t));var r;return n}(s,t)),o)S(e,o);else if(s.objectMode||t&&t.length>0)if("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===c.prototype||(t=function(e){return c.from(e)}(t)),r)s.endEmitted?S(e,new E):T(e,s,t,!0);else if(s.ended)S(e,new _);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!n?(t=s.decoder.write(t),s.objectMode||0!==t.length?T(e,s,t,!1):L(e,s)):T(e,s,t,!1)}else r||(s.reading=!1,L(e,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function T(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&k(e)),L(e,t)}Object.defineProperty(O.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),O.prototype.destroy=y.destroy,O.prototype._undestroy=y.undestroy,O.prototype._destroy=function(e,t){t(e)},O.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=c.from(e,t),t=""),n=!0),x(this,e,t,!1,n)},O.prototype.unshift=function(e){return x(this,e,null,!0,!1)},O.prototype.isPaused=function(){return!1===this._readableState.flowing},O.prototype.setEncoding=function(e){f||(f=i("28kcI").StringDecoder);var t=new f(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,r="";null!==n;)r+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==r&&this._readableState.buffer.push(r),this._readableState.length=r.length,this};var N=1073741824;function C(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=N?e=N:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function k(e){var t=e._readableState;l("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(l("emitReadable",t.flowing),t.emittedReadable=!0,o.nextTick(P,e))}function P(e){var t=e._readableState;l("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,U(e)}function L(e,t){t.readingMore||(t.readingMore=!0,o.nextTick(I,e,t))}function I(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(l("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function M(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function j(e){l("readable nexttick read 0"),e.read(0)}function D(e,t){l("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),U(e),t.flowing&&!t.reading&&e.read(0)}function U(e){var t=e._readableState;for(l("flow",t.flowing);t.flowing&&null!==e.read(););}function B(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function q(e){var t=e._readableState;l("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,o.nextTick(F,t,e))}function F(e,t){if(l("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function H(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}O.prototype.read=function(e){l("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return l("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?q(this):k(this),null;if(0===(e=C(e,t))&&t.ended)return 0===t.length&&q(this),null;var r,i=t.needReadable;return l("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&l("length less than watermark",i=!0),t.ended||t.reading?l("reading or ended",i=!1):i&&(l("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=C(n,t))),null===(r=e>0?B(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&q(this)),null!==r&&this.emit("data",r),r},O.prototype._read=function(e){S(this,new w("_read()"))},O.prototype.pipe=function(e,t){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=e;break;case 1:r.pipes=[r.pipes,e];break;default:r.pipes.push(e)}r.pipesCount+=1,l("pipe count=%d opts=%j",r.pipesCount,t);var i=(!t||!1!==t.end)&&e!==o.stdout&&e!==o.stderr?c:y;function a(t,i){l("onunpipe"),t===n&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,l("cleanup"),e.removeListener("close",p),e.removeListener("finish",b),e.removeListener("drain",u),e.removeListener("error",d),e.removeListener("unpipe",a),n.removeListener("end",c),n.removeListener("end",y),n.removeListener("data",f),h=!0,!r.awaitDrain||e._writableState&&!e._writableState.needDrain||u())}function c(){l("onend"),e.end()}r.endEmitted?o.nextTick(i):n.once("end",i),e.on("unpipe",a);var u=function(e){return function(){var t=e._readableState;l("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,U(e))}}(n);e.on("drain",u);var h=!1;function f(t){l("ondata");var i=e.write(t);l("dest.write",i),!1===i&&((1===r.pipesCount&&r.pipes===e||r.pipesCount>1&&-1!==H(r.pipes,e))&&!h&&(l("false write response, pause",r.awaitDrain),r.awaitDrain++),n.pause())}function d(t){l("onerror",t),y(),e.removeListener("error",d),0===s(e,"error")&&S(e,t)}function p(){e.removeListener("finish",b),y()}function b(){l("onfinish"),e.removeListener("close",p),y()}function y(){l("unpipe"),n.unpipe(e)}return n.on("data",f),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",d),e.once("close",p),e.once("finish",b),e.emit("pipe",n),r.flowing||(l("pipe resume"),n.resume()),e},O.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=H(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},O.prototype.on=function(e,t){var n=a.prototype.on.call(this,e,t),r=this._readableState;return"data"===e?(r.readableListening=this.listenerCount("readable")>0,!1!==r.flowing&&this.resume()):"readable"===e&&(r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,l("on readable",r.length,r.reading),r.length?k(this):r.reading||o.nextTick(j,this))),n},O.prototype.addListener=O.prototype.on,O.prototype.removeListener=function(e,t){var n=a.prototype.removeListener.call(this,e,t);return"readable"===e&&o.nextTick(M,this),n},O.prototype.removeAllListeners=function(e){var t=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||o.nextTick(M,this),t},O.prototype.resume=function(){var e=this._readableState;return e.flowing||(l("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,o.nextTick(D,e,t))}(this,e)),e.paused=!1,this},O.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},O.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(l("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(l("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<A.length;o++)e.on(A[o],this.emit.bind(this,A[o]));return this._read=function(t){l("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(O.prototype[Symbol.asyncIterator]=function(){return void 0===d&&(d=i("5gKYZ")),d(this)}),Object.defineProperty(O.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(O.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(O.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),O._fromList=B,Object.defineProperty(O.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(O.from=function(e,t){return void 0===p&&(p=i("8igDo")),p(O,e,t)})})),i.register("ePtPP",(function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var c,u=[],l=!1,h=-1;function f(){l&&c&&(l=!1,c.length?u=c.concat(u):h=-1,u.length&&d())}function d(){if(!l){var e=a(f);l=!0;for(var t=u.length;t;){for(c=u,u=[];++h<t;)c&&c[h].run();h=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function b(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||l||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=b,i.addListener=b,i.once=b,i.off=b,i.removeListener=b,i.removeAllListeners=b,i.emit=b,i.prependListener=b,i.prependOnceListener=b,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}})),i.register("3oV8N",(function(e,t){"use strict";var n,r="object"==typeof Reflect?Reflect:null,i=r&&"function"==typeof r.apply?r.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};n=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}y(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&y(e,"error",t,n)}(e,i,{once:!0})}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function l(e,t,n,r){var i,o,s,a;if(c(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"==typeof s?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=u(e))>0&&s.length>i&&!s.warned){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=s.length,a=l,console&&console.warn&&console.warn(a)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=h.bind(r);return i.listener=n,r.wrapFn=i,i}function d(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):b(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function b(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function y(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){r.once&&e.removeEventListener(t,i),n(o)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)i(c,this,t);else{var u=c.length,l=b(c,u);for(n=0;n<u;++n)i(l[n],this,t)}return!0},s.prototype.addListener=function(e,t){return l(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return l(this,e,t,!0)},s.prototype.once=function(e,t){return c(t),this.on(e,f(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,f(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,i,o,s;if(c(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return d(this,e,!0)},s.prototype.rawListeners=function(e){return d(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},s.prototype.listenerCount=p,s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}})),i.register("3vqBO",(function(e,t){e.exports=i("3oV8N").EventEmitter})),i.register("bqBrJ",(function(e,n){var r,o,s,a;t(e.exports,"Buffer",(()=>r),(e=>r=e)),t(e.exports,"SlowBuffer",(()=>o),(e=>o=e)),t(e.exports,"INSPECT_MAX_BYTES",(()=>s),(e=>s=e)),t(e.exports,"kMaxLength",(()=>a),(e=>a=e));var c=i("9Et26"),u=i("bDLoS");const l="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;r=d,o=function(e){+e!=e&&(e=0);return d.alloc(+e)},s=50;const h=2147483647;function f(e){if(e>h)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,d.prototype),t}function d(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return y(e)}return p(e,t,n)}function p(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!d.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|_(e,t);let r=f(n);const i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(ee(e,Uint8Array)){const t=new Uint8Array(e);return v(t.buffer,t.byteOffset,t.byteLength)}return g(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(ee(e,ArrayBuffer)||e&&ee(e.buffer,ArrayBuffer))return v(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(ee(e,SharedArrayBuffer)||e&&ee(e.buffer,SharedArrayBuffer)))return v(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return d.from(r,t,n);const i=function(e){if(d.isBuffer(e)){const t=0|m(e.length),n=f(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||te(e.length)?f(0):g(e);if("Buffer"===e.type&&Array.isArray(e.data))return g(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return d.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function b(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function y(e){return b(e),f(e<0?0:0|m(e))}function g(e){const t=e.length<0?0:0|m(e.length),n=f(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function v(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,d.prototype),r}function m(e){if(e>=h)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+h.toString(16)+" bytes");return 0|e}function _(e,t){if(d.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||ee(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return Y(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Z(e).length;default:if(i)return r?-1:Y(e).length;t=(""+t).toLowerCase(),i=!0}}function w(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return M(this,t,n);case"utf8":case"utf-8":return k(this,t,n);case"ascii":return L(this,t,n);case"latin1":case"binary":return I(this,t,n);case"base64":return C(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function E(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function S(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),te(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=d.from(t,r)),d.isBuffer(t))return 0===t.length?-1:A(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):A(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function A(e,t,n,r,i){let o,s=1,a=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,n/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){let r=-1;for(o=n;o<a;o++)if(u(e,o)===u(t,-1===r?0:o-r)){if(-1===r&&(r=o),o-r+1===c)return r*s}else-1!==r&&(o-=o-r),r=-1}else for(n+c>a&&(n=a-c),o=n;o>=0;o--){let n=!0;for(let r=0;r<c;r++)if(u(e,o+r)!==u(t,r)){n=!1;break}if(n)return o}return-1}function R(e,t,n,r){n=Number(n)||0;const i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;const o=t.length;let s;for(r>o/2&&(r=o/2),s=0;s<r;++s){const r=parseInt(t.substr(2*s,2),16);if(te(r))return s;e[n+s]=r}return s}function O(e,t,n,r){return Q(Y(t,e.length-n),e,n,r)}function x(e,t,n,r){return Q(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function T(e,t,n,r){return Q(Z(t),e,n,r)}function N(e,t,n,r){return Q(function(e,t){let n,r,i;const o=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function C(e,t,n){return 0===t&&n===e.length?c.fromByteArray(e):c.fromByteArray(e.slice(t,n))}function k(e,t,n){n=Math.min(e.length,n);const r=[];let i=t;for(;i<n;){const t=e[i];let o=null,s=t>239?4:t>223?3:t>191?2:1;if(i+s<=n){let n,r,a,c;switch(s){case 1:t<128&&(o=t);break;case 2:n=e[i+1],128==(192&n)&&(c=(31&t)<<6|63&n,c>127&&(o=c));break;case 3:n=e[i+1],r=e[i+2],128==(192&n)&&128==(192&r)&&(c=(15&t)<<12|(63&n)<<6|63&r,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:n=e[i+1],r=e[i+2],a=e[i+3],128==(192&n)&&128==(192&r)&&128==(192&a)&&(c=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&a,c>65535&&c<1114112&&(o=c))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=s}return function(e){const t=e.length;if(t<=P)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=P));return n}(r)}a=h,d.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),d.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}}),d.poolSize=8192,d.from=function(e,t,n){return p(e,t,n)},Object.setPrototypeOf(d.prototype,Uint8Array.prototype),Object.setPrototypeOf(d,Uint8Array),d.alloc=function(e,t,n){return function(e,t,n){return b(e),e<=0?f(e):void 0!==t?"string"==typeof n?f(e).fill(t,n):f(e).fill(t):f(e)}(e,t,n)},d.allocUnsafe=function(e){return y(e)},d.allocUnsafeSlow=function(e){return y(e)},d.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==d.prototype},d.compare=function(e,t){if(ee(e,Uint8Array)&&(e=d.from(e,e.offset,e.byteLength)),ee(t,Uint8Array)&&(t=d.from(t,t.offset,t.byteLength)),!d.isBuffer(e)||!d.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},d.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return d.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const r=d.allocUnsafe(t);let i=0;for(n=0;n<e.length;++n){let t=e[n];if(ee(t,Uint8Array))i+t.length>r.length?(d.isBuffer(t)||(t=d.from(t)),t.copy(r,i)):Uint8Array.prototype.set.call(r,t,i);else{if(!d.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,i)}i+=t.length}return r},d.byteLength=_,d.prototype._isBuffer=!0,d.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)E(this,t,t+1);return this},d.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)E(this,t,t+3),E(this,t+1,t+2);return this},d.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)E(this,t,t+7),E(this,t+1,t+6),E(this,t+2,t+5),E(this,t+3,t+4);return this},d.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?k(this,0,e):w.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(e){if(!d.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===d.compare(this,e)},d.prototype.inspect=function(){let e="";const t=s;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},l&&(d.prototype[l]=d.prototype.inspect),d.prototype.compare=function(e,t,n,r,i){if(ee(e,Uint8Array)&&(e=d.from(e,e.offset,e.byteLength)),!d.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;let o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0);const a=Math.min(o,s),c=this.slice(r,i),u=e.slice(t,n);for(let e=0;e<a;++e)if(c[e]!==u[e]){o=c[e],s=u[e];break}return o<s?-1:s<o?1:0},d.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},d.prototype.indexOf=function(e,t,n){return S(this,e,t,n,!0)},d.prototype.lastIndexOf=function(e,t,n){return S(this,e,t,n,!1)},d.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let o=!1;for(;;)switch(r){case"hex":return R(this,e,t,n);case"utf8":case"utf-8":return O(this,e,t,n);case"ascii":case"latin1":case"binary":return x(this,e,t,n);case"base64":return T(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const P=4096;function L(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function I(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function M(e,t,n){const r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let i="";for(let r=t;r<n;++r)i+=ne[e[r]];return i}function j(e,t,n){const r=e.slice(t,n);let i="";for(let e=0;e<r.length-1;e+=2)i+=String.fromCharCode(r[e]+256*r[e+1]);return i}function D(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function U(e,t,n,r,i,o){if(!d.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function B(e,t,n,r,i){z(t,r,i,e,n,7);let o=Number(t&BigInt(4294967295));e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,n}function q(e,t,n,r,i){z(t,r,i,e,n,7);let o=Number(t&BigInt(4294967295));e[n+7]=o,o>>=8,e[n+6]=o,o>>=8,e[n+5]=o,o>>=8,e[n+4]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=s,s>>=8,e[n+2]=s,s>>=8,e[n+1]=s,s>>=8,e[n]=s,n+8}function F(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function H(e,t,n,r,i){return t=+t,n>>>=0,i||F(e,0,n,4),u.write(e,t,n,r,23,4),n+4}function W(e,t,n,r,i){return t=+t,n>>>=0,i||F(e,0,n,8),u.write(e,t,n,r,52,8),n+8}d.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,d.prototype),r},d.prototype.readUintLE=d.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);let r=this[e],i=1,o=0;for(;++o<t&&(i*=256);)r+=this[e+o]*i;return r},d.prototype.readUintBE=d.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);let r=this[e+--t],i=1;for(;t>0&&(i*=256);)r+=this[e+--t]*i;return r},d.prototype.readUint8=d.prototype.readUInt8=function(e,t){return e>>>=0,t||D(e,1,this.length),this[e]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(e,t){return e>>>=0,t||D(e,2,this.length),this[e]|this[e+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(e,t){return e>>>=0,t||D(e,2,this.length),this[e]<<8|this[e+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(e,t){return e>>>=0,t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(e,t){return e>>>=0,t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},d.prototype.readBigUInt64LE=re((function(e){J(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||K(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))})),d.prototype.readBigUInt64BE=re((function(e){J(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||K(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),d.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);let r=this[e],i=1,o=0;for(;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},d.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);let r=t,i=1,o=this[e+--r];for(;r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},d.prototype.readInt8=function(e,t){return e>>>=0,t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},d.prototype.readInt16LE=function(e,t){e>>>=0,t||D(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},d.prototype.readInt16BE=function(e,t){e>>>=0,t||D(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},d.prototype.readInt32LE=function(e,t){return e>>>=0,t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},d.prototype.readInt32BE=function(e,t){return e>>>=0,t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},d.prototype.readBigInt64LE=re((function(e){J(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||K(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),d.prototype.readBigInt64BE=re((function(e){J(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||K(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),d.prototype.readFloatLE=function(e,t){return e>>>=0,t||D(e,4,this.length),u.read(this,e,!0,23,4)},d.prototype.readFloatBE=function(e,t){return e>>>=0,t||D(e,4,this.length),u.read(this,e,!1,23,4)},d.prototype.readDoubleLE=function(e,t){return e>>>=0,t||D(e,8,this.length),u.read(this,e,!0,52,8)},d.prototype.readDoubleBE=function(e,t){return e>>>=0,t||D(e,8,this.length),u.read(this,e,!1,52,8)},d.prototype.writeUintLE=d.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){U(this,e,t,n,Math.pow(2,8*n)-1,0)}let i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){U(this,e,t,n,Math.pow(2,8*n)-1,0)}let i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},d.prototype.writeUint8=d.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||U(this,e,t,1,255,0),this[t]=255&e,t+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||U(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||U(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||U(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||U(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},d.prototype.writeBigUInt64LE=re((function(e,t=0){return B(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),d.prototype.writeBigUInt64BE=re((function(e,t=0){return q(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),d.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);U(this,e,t,n,r-1,-r)}let i=0,o=1,s=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+n},d.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);U(this,e,t,n,r-1,-r)}let i=n-1,o=1,s=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+n},d.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||U(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},d.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||U(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},d.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||U(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},d.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||U(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},d.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||U(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},d.prototype.writeBigInt64LE=re((function(e,t=0){return B(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),d.prototype.writeBigInt64BE=re((function(e,t=0){return q(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),d.prototype.writeFloatLE=function(e,t,n){return H(this,e,t,!0,n)},d.prototype.writeFloatBE=function(e,t,n){return H(this,e,t,!1,n)},d.prototype.writeDoubleLE=function(e,t,n){return W(this,e,t,!0,n)},d.prototype.writeDoubleBE=function(e,t,n){return W(this,e,t,!1,n)},d.prototype.copy=function(e,t,n,r){if(!d.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);const i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},d.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!d.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{const o=d.isBuffer(e)?e:d.from(e,r),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=o[i%s]}return this};const V={};function $(e,t,n){V[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function G(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function z(e,t,n,r,i,o){if(e>n||e<t){const r="bigint"==typeof t?"n":"";let i;throw i=o>3?0===t||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(o+1)}${r}`:`>= -(2${r} ** ${8*(o+1)-1}${r}) and < 2 ** ${8*(o+1)-1}${r}`:`>= ${t}${r} and <= ${n}${r}`,new V.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,n){J(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||K(t,e.length-(n+1))}(r,i,o)}function J(e,t){if("number"!=typeof e)throw new V.ERR_INVALID_ARG_TYPE(t,"number",e)}function K(e,t,n){if(Math.floor(e)!==e)throw J(e,n),new V.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new V.ERR_BUFFER_OUT_OF_BOUNDS;throw new V.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}$("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),$("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),$("ERR_OUT_OF_RANGE",(function(e,t,n){let r=`The value of "${e}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=G(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=G(i)),i+="n"),r+=` It must be ${t}. Received ${i}`,r}),RangeError);const X=/[^+/0-9A-Za-z-_]/g;function Y(e,t){let n;t=t||1/0;const r=e.length;let i=null;const o=[];for(let s=0;s<r;++s){if(n=e.charCodeAt(s),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Z(e){return c.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(X,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Q(e,t,n,r){let i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function ee(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function te(e){return e!=e}const ne=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let i=0;i<16;++i)t[r+i]=e[n]+e[i]}return t}();function re(e){return"undefined"==typeof BigInt?ie:e}function ie(){throw new Error("BigInt not supported")}})),i.register("9Et26",(function(e,n){var r,i;t(e.exports,"toByteArray",(()=>r),(e=>r=e)),t(e.exports,"fromByteArray",(()=>i),(e=>i=e)),r=function(e){var t,n,r=h(e),i=r[0],o=r[1],c=new a(function(e,t,n){return 3*(t+n)/4-n}(0,i,o)),u=0,l=o>0?i-4:i;for(n=0;n<l;n+=4)t=s[e.charCodeAt(n)]<<18|s[e.charCodeAt(n+1)]<<12|s[e.charCodeAt(n+2)]<<6|s[e.charCodeAt(n+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;2===o&&(t=s[e.charCodeAt(n)]<<2|s[e.charCodeAt(n+1)]>>4,c[u++]=255&t);1===o&&(t=s[e.charCodeAt(n)]<<10|s[e.charCodeAt(n+1)]<<4|s[e.charCodeAt(n+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t);return c},i=function(e){for(var t,n=e.length,r=n%3,i=[],s=16383,a=0,c=n-r;a<c;a+=s)i.push(f(e,a,a+s>c?c:a+s));1===r?(t=e[n-1],i.push(o[t>>2]+o[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(o[t>>10]+o[t>>4&63]+o[t<<2&63]+"="));return i.join("")};for(var o=[],s=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,l=c.length;u<l;++u)o[u]=c[u],s[c.charCodeAt(u)]=u;function h(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function f(e,t,n){for(var r,i,s=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(o[(i=r)>>18&63]+o[i>>12&63]+o[i>>6&63]+o[63&i]);return s.join("")}s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63})),i.register("bDLoS",(function(e,n){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var r,i;t(e.exports,"read",(()=>r),(e=>r=e)),t(e.exports,"write",(()=>i),(e=>i=e)),r=function(e,t,n,r,i){var o,s,a=8*i-r-1,c=(1<<a)-1,u=c>>1,l=-7,h=n?i-1:0,f=n?-1:1,d=e[t+h];for(h+=f,o=d&(1<<-l)-1,d>>=-l,l+=a;l>0;o=256*o+e[t+h],h+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+e[t+h],h+=f,l-=8);if(0===o)o=1-u;else{if(o===c)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,r),o-=u}return(d?-1:1)*s*Math.pow(2,o-r)},i=function(e,t,n,r,i,o){var s,a,c,u=8*o-i-1,l=(1<<u)-1,h=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,b=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+h>=1?f/c:f*Math.pow(2,1-h))*c>=2&&(s++,c/=2),s+h>=l?(a=0,s=l):s+h>=1?(a=(t*c-1)*Math.pow(2,i),s+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;e[n+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;e[n+d]=255&s,d+=p,s/=256,u-=8);e[n+d-p]|=128*b}})),i.register("1DJXa",(function(e,t){})),i.register("k9Eb1",(function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=i("bqBrJ").Buffer,a=i("1DJXa").inspect,c=a&&a.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,i,u;return t=e,i=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return s.alloc(0);for(var t,n,r,i=s.allocUnsafe(e>>>0),o=this.head,a=0;o;)t=o.data,n=i,r=a,s.prototype.copy.call(t,n,r),a+=o.data.length,o=o.next;return i}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?r+=i:r+=i.slice(0,e),0==(e-=o)){o===i.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=s.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var i=n.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(o));break}++r}return this.length-=r,t}},{key:c,value:function(e,t){return a(this,function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach((function(t){r(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}],i&&o(t.prototype,i),u&&o(t,u),e}()})),i.register("6hWXN",(function(e,t){"use strict";var n=i("ePtPP");function r(e,t){s(e,t),o(e)}function o(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function s(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var i=this,a=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return a||c?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,n.nextTick(s,this,e)):n.nextTick(s,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?i._writableState?i._writableState.errorEmitted?n.nextTick(o,i):(i._writableState.errorEmitted=!0,n.nextTick(r,i,e)):n.nextTick(r,i,e):t?(n.nextTick(o,i),t(e)):n.nextTick(o,i)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}})),i.register("56mX2",(function(e,t){"use strict";var n=i("aOgJu").codes.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,r,i){var o=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,i,r);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new n(i?r:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}})),i.register("aOgJu",(function(e,n){var r;t(e.exports,"codes",(()=>r),(e=>r=e));var i={};function o(e,t,n){n||(n=Error);var r=function(e){var n,r;function i(n,r,i){return e.call(this,function(e,n,r){return"string"==typeof t?t:t(e,n,r)}(n,r,i))||this}return r=e,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,i}(n);r.prototype.name=n.name,r.prototype.code=e,i[e]=r}function s(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}o("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),o("ERR_INVALID_ARG_TYPE",(function(e,t,n){var r,i,o,a;if("string"==typeof t&&(i="not ",t.substr(!o||o<0?0:+o,i.length)===i)?(r="must not be",t=t.replace(/^not /,"")):r="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))a="The ".concat(e," ").concat(r," ").concat(s(t,"type"));else{var c=function(e,t,n){return"number"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument";a='The "'.concat(e,'" ').concat(c," ").concat(r," ").concat(s(t,"type"))}return a+=". Received type ".concat(typeof n)}),TypeError),o("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),o("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),o("ERR_STREAM_PREMATURE_CLOSE","Premature close"),o("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),o("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),o("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),o("ERR_STREAM_WRITE_AFTER_END","write after end"),o("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),o("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),o("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),r=i})),i.register("jqAKP",(function(e,t){"use strict";var n=i("ePtPP"),r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=l;var o=i("kZTRI"),s=i("gihud");i("5jAh8")(l,o);for(var a=r(s.prototype),c=0;c<a.length;c++){var u=a[c];l.prototype[u]||(l.prototype[u]=s.prototype[u])}function l(e){if(!(this instanceof l))return new l(e);o.call(this,e),s.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",h)))}function h(){this._writableState.ended||n.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})})),i.register("gihud",(function(t,n){"use strict";var r,o=i("ePtPP");function s(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}t.exports=O,O.WritableState=R;var a={deprecate:i("aAtir")},c=i("3vqBO"),u=i("bqBrJ").Buffer,l=e.Uint8Array||function(){};var h,f=i("6hWXN"),d=i("56mX2").getHighWaterMark,p=i("aOgJu").codes,b=p.ERR_INVALID_ARG_TYPE,y=p.ERR_METHOD_NOT_IMPLEMENTED,g=p.ERR_MULTIPLE_CALLBACK,v=p.ERR_STREAM_CANNOT_PIPE,m=p.ERR_STREAM_DESTROYED,_=p.ERR_STREAM_NULL_VALUES,w=p.ERR_STREAM_WRITE_AFTER_END,E=p.ERR_UNKNOWN_ENCODING,S=f.errorOrDestroy;function A(){}function R(e,t,n){r=r||i("jqAKP"),e=e||{},"boolean"!=typeof n&&(n=t instanceof r),this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=d(this,e,"writableHighWaterMark",n),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if("function"!=typeof i)throw new g;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,i){--t.pendingcb,n?(o.nextTick(i,r),o.nextTick(P,e,t),e._writableState.errorEmitted=!0,S(e,r)):(i(r),e._writableState.errorEmitted=!0,S(e,r),P(e,t))}(e,n,r,t,i);else{var s=C(n)||e.destroyed;s||n.corked||n.bufferProcessing||!n.bufferedRequest||N(e,n),r?o.nextTick(T,e,n,s,i):T(e,n,s,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function O(e){var t=this instanceof(r=r||i("jqAKP"));if(!t&&!h.call(O,this))return new O(e);this._writableState=new R(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),c.call(this)}function x(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new m("write")):n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function T(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),P(e,t)}function N(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),o=t.corkedRequestsFree;o.entry=n;for(var a=0,c=!0;n;)i[a]=n,n.isBuf||(c=!1),n=n.next,a+=1;i.allBuffers=c,x(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new s(t),t.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,l=n.encoding,h=n.callback;if(x(e,t,!1,t.objectMode?1:u.length,u,l,h),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function C(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function k(e,t){e._final((function(n){t.pendingcb--,n&&S(e,n),t.prefinished=!0,e.emit("prefinish"),P(e,t)}))}function P(e,t){var n=C(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,o.nextTick(k,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var r=e._readableState;(!r||r.autoDestroy&&r.endEmitted)&&e.destroy()}return n}i("5jAh8")(O,c),R.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(R.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(h=Function.prototype[Symbol.hasInstance],Object.defineProperty(O,Symbol.hasInstance,{value:function(e){return!!h.call(this,e)||this===O&&(e&&e._writableState instanceof R)}})):h=function(e){return e instanceof this},O.prototype.pipe=function(){S(this,new v)},O.prototype.write=function(e,t,n){var r,i=this._writableState,s=!1,a=!i.objectMode&&(r=e,u.isBuffer(r)||r instanceof l);return a&&!u.isBuffer(e)&&(e=function(e){return u.from(e)}(e)),"function"==typeof t&&(n=t,t=null),a?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=A),i.ending?function(e,t){var n=new w;S(e,n),o.nextTick(t,n)}(this,n):(a||function(e,t,n,r){var i;return null===n?i=new _:"string"==typeof n||t.objectMode||(i=new b("chunk",["string","Buffer"],n)),!i||(S(e,i),o.nextTick(r,i),!1)}(this,i,e,n))&&(i.pendingcb++,s=function(e,t,n,r,i,o){if(!n){var s=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=u.from(t,n));return t}(t,r,i);r!==s&&(n=!0,i="buffer",r=s)}var a=t.objectMode?1:r.length;t.length+=a;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else x(e,t,!1,a,r,i,o);return c}(this,i,a,e,t,n)),s},O.prototype.cork=function(){this._writableState.corked++},O.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||N(this,e))},O.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new E(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(O.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(O.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),O.prototype._write=function(e,t,n){n(new y("_write()"))},O.prototype._writev=null,O.prototype.end=function(e,t,n){var r=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||function(e,t,n){t.ending=!0,P(e,t),n&&(t.finished?o.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,r,n),this},Object.defineProperty(O.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(O.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),O.prototype.destroy=f.destroy,O.prototype._undestroy=f.undestroy,O.prototype._destroy=function(e,t){t(e)}})),i.register("aAtir",(function(t,n){function r(t){try{if(!e.localStorage)return!1}catch(e){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}})),i.register("28kcI",(function(e,n){var r;t(e.exports,"StringDecoder",(()=>r),(e=>r=e));var o=i("8RZi7").Buffer,s=o.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(o.isEncoding===s||!s(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=h,t=4;break;case"utf8":this.fillLast=u,t=4;break;case"base64":this.text=f,this.end=d,t=3;break;default:return this.write=p,void(this.end=b)}this.lastNeed=0,this.lastTotal=0,this.lastChar=o.allocUnsafe(t)}function c(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function u(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function h(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function f(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function p(e){return e.toString(this.encoding)}function b(e){return e&&e.length?this.write(e):""}r=a,a.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},a.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},a.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=c(t[r]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=c(t[r]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=c(t[r]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}})),i.register("8RZi7",(function(e,t){var n=i("bqBrJ"),r=n.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return r(e,t,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(o(n,e.exports),e.exports.Buffer=s),s.prototype=Object.create(r.prototype),o(r,s),s.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return r(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=r(e);return void 0!==t?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}})),i.register("5gKYZ",(function(e,t){"use strict";var n,r=i("ePtPP");function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=i("j5ZwK"),a=Symbol("lastResolve"),c=Symbol("lastReject"),u=Symbol("error"),l=Symbol("ended"),h=Symbol("lastPromise"),f=Symbol("handlePromise"),d=Symbol("stream");function p(e,t){return{value:e,done:t}}function b(e){var t=e[a];if(null!==t){var n=e[d].read();null!==n&&(e[h]=null,e[a]=null,e[c]=null,t(p(n,!1)))}}function y(e){r.nextTick(b,e)}var g=Object.getPrototypeOf((function(){})),v=Object.setPrototypeOf((o(n={get stream(){return this[d]},next:function(){var e=this,t=this[u];if(null!==t)return Promise.reject(t);if(this[l])return Promise.resolve(p(void 0,!0));if(this[d].destroyed)return new Promise((function(t,n){r.nextTick((function(){e[u]?n(e[u]):t(p(void 0,!0))}))}));var n,i=this[h];if(i)n=new Promise(function(e,t){return function(n,r){e.then((function(){t[l]?n(p(void 0,!0)):t[f](n,r)}),r)}}(i,this));else{var o=this[d].read();if(null!==o)return Promise.resolve(p(o,!1));n=new Promise(this[f])}return this[h]=n,n}},Symbol.asyncIterator,(function(){return this})),o(n,"return",(function(){var e=this;return new Promise((function(t,n){e[d].destroy(null,(function(e){e?n(e):t(p(void 0,!0))}))}))})),n),g);e.exports=function(e){var t,n=Object.create(v,(o(t={},d,{value:e,writable:!0}),o(t,a,{value:null,writable:!0}),o(t,c,{value:null,writable:!0}),o(t,u,{value:null,writable:!0}),o(t,l,{value:e._readableState.endEmitted,writable:!0}),o(t,f,{value:function(e,t){var r=n[d].read();r?(n[h]=null,n[a]=null,n[c]=null,e(p(r,!1))):(n[a]=e,n[c]=t)},writable:!0}),t));return n[h]=null,s(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[c];return null!==t&&(n[h]=null,n[a]=null,n[c]=null,t(e)),void(n[u]=e)}var r=n[a];null!==r&&(n[h]=null,n[a]=null,n[c]=null,r(p(void 0,!0))),n[l]=!0})),e.on("readable",y.bind(null,n)),n}})),i.register("j5ZwK",(function(e,t){"use strict";var n=i("aOgJu").codes.ERR_STREAM_PREMATURE_CLOSE;function r(){}e.exports=function e(t,i,o){if("function"==typeof i)return e(t,null,i);i||(i={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r)}}}(o||r);var s=i.readable||!1!==i.readable&&t.readable,a=i.writable||!1!==i.writable&&t.writable,c=function(){t.writable||l()},u=t._writableState&&t._writableState.finished,l=function(){a=!1,u=!0,s||o.call(t)},h=t._readableState&&t._readableState.endEmitted,f=function(){s=!1,h=!0,a||o.call(t)},d=function(e){o.call(t,e)},p=function(){var e;return s&&!h?(t._readableState&&t._readableState.ended||(e=new n),o.call(t,e)):a&&!u?(t._writableState&&t._writableState.ended||(e=new n),o.call(t,e)):void 0},b=function(){t.req.on("finish",l)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?a&&!t._writableState&&(t.on("end",c),t.on("close",c)):(t.on("complete",l),t.on("abort",p),t.req?b():t.on("request",b)),t.on("end",f),t.on("finish",l),!1!==i.error&&t.on("error",d),t.on("close",p),function(){t.removeListener("complete",l),t.removeListener("abort",p),t.removeListener("request",b),t.req&&t.req.removeListener("finish",l),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",l),t.removeListener("end",f),t.removeListener("error",d),t.removeListener("close",p)}}})),i.register("8igDo",(function(e,t){e.exports=function(){throw new Error("Readable.from is not available in the browser")}})),i.register("erC5i",(function(e,t){"use strict";e.exports=l;var n=i("aOgJu").codes,r=n.ERR_METHOD_NOT_IMPLEMENTED,o=n.ERR_MULTIPLE_CALLBACK,s=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=n.ERR_TRANSFORM_WITH_LENGTH_0,c=i("jqAKP");function u(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new o);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);c.call(this,e),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",h)}function h(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush((function(t,n){f(e,t,n)}))}function f(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new a;if(e._transformState.transforming)throw new s;return e.push(null)}i("5jAh8")(l,c),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,c.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,n){n(new r("_transform()"))},l.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){c.prototype._destroy.call(this,e,(function(e){t(e)}))}})),i.register("3dCe5",(function(e,t){"use strict";e.exports=r;var n=i("erC5i");function r(e){if(!(this instanceof r))return new r(e);n.call(this,e)}i("5jAh8")(r,n),r.prototype._transform=function(e,t,n){n(null,e)}})),i.register("azGNy",(function(e,t){"use strict";var n;var r=i("aOgJu").codes,o=r.ERR_MISSING_ARGS,s=r.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function c(e,t,r,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var a=!1;e.on("close",(function(){a=!0})),void 0===n&&(n=i("j5ZwK")),n(e,{readable:t,writable:r},(function(e){if(e)return o(e);a=!0,o()}));var c=!1;return function(t){if(!a&&!c)return c=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void o(t||new s("pipe"))}}function u(e){e()}function l(e,t){return e.pipe(t)}function h(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}e.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=h(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var s=t.map((function(e,n){var o=n<t.length-1;return c(e,o,n>0,(function(e){r||(r=e),e&&s.forEach(u),o||(s.forEach(u),i(r))}))}));return t.reduce(l)}})),i.register("izynC",(function(t,n){!function(r){var i=n&&!n.nodeType&&n,o=t&&!t.nodeType&&t,s="object"==typeof e&&e;s.global!==s&&s.window!==s&&s.self!==s||(r=s);var a,c,u=2147483647,l=36,h=/^xn--/,f=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},b=Math.floor,y=String.fromCharCode;function g(e){throw RangeError(p[e])}function v(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function m(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+v((e=e.replace(d,".")).split("."),t).join(".")}function _(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function w(e){return v(e,(function(e){var t="";return e>65535&&(t+=y((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=y(e)})).join("")}function E(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function S(e,t,n){var r=0;for(e=n?b(e/700):e>>1,e+=b(e/t);e>455;r+=l)e=b(e/35);return b(r+36*e/(e+38))}function A(e){var t,n,r,i,o,s,a,c,h,f,d,p=[],y=e.length,v=0,m=128,_=72;for((n=e.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&g("not-basic"),p.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<y;){for(o=v,s=1,a=l;i>=y&&g("invalid-input"),((c=(d=e.charCodeAt(i++))-48<10?d-22:d-65<26?d-65:d-97<26?d-97:l)>=l||c>b((u-v)/s))&&g("overflow"),v+=c*s,!(c<(h=a<=_?1:a>=_+26?26:a-_));a+=l)s>b(u/(f=l-h))&&g("overflow"),s*=f;_=S(v-o,t=p.length+1,0==o),b(v/t)>u-m&&g("overflow"),m+=b(v/t),v%=t,p.splice(v++,0,m)}return w(p)}function R(e){var t,n,r,i,o,s,a,c,h,f,d,p,v,m,w,A=[];for(p=(e=_(e)).length,t=128,n=0,o=72,s=0;s<p;++s)(d=e[s])<128&&A.push(y(d));for(r=i=A.length,i&&A.push("-");r<p;){for(a=u,s=0;s<p;++s)(d=e[s])>=t&&d<a&&(a=d);for(a-t>b((u-n)/(v=r+1))&&g("overflow"),n+=(a-t)*v,t=a,s=0;s<p;++s)if((d=e[s])<t&&++n>u&&g("overflow"),d==t){for(c=n,h=l;!(c<(f=h<=o?1:h>=o+26?26:h-o));h+=l)w=c-f,m=l-f,A.push(y(E(f+w%m,0))),c=b(w/m);A.push(y(E(c,0))),o=S(n,v,r==i),n=0,++r}++n,++t}return A.join("")}if(a={version:"1.3.2",ucs2:{decode:_,encode:w},decode:A,encode:R,toASCII:function(e){return m(e,(function(e){return f.test(e)?"xn--"+R(e):e}))},toUnicode:function(e){return m(e,(function(e){return h.test(e)?A(e.slice(4).toLowerCase()):e}))}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",(function(){return a}));else if(i&&o)if(t.exports==i)o.exports=a;else for(c in a)a.hasOwnProperty(c)&&(i[c]=a[c]);else r.punycode=a}(this)})),i.register("irK6S",(function(e,t){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,i,o){t=t||"&",i=i||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var c=1e3;o&&"number"==typeof o.maxKeys&&(c=o.maxKeys);var u=e.length;c>0&&u>c&&(u=c);for(var l=0;l<u;++l){var h,f,d,p,b=e[l].replace(a,"%20"),y=b.indexOf(i);y>=0?(h=b.substr(0,y),f=b.substr(y+1)):(h=b,f=""),d=decodeURIComponent(h),p=decodeURIComponent(f),n(s,d)?r(s[d])?s[d].push(p):s[d]=[s[d],p]:s[d]=p}return s};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}})),i.register("h75Bs",(function(e,t){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,s,a){return t=t||"&",s=s||"=",null===e&&(e=void 0),"object"==typeof e?i(o(e),(function(o){var a=encodeURIComponent(n(o))+s;return r(e[o])?i(e[o],(function(e){return a+encodeURIComponent(n(e))})).join(t):a+encodeURIComponent(n(e[o]))})).join(t):a?encodeURIComponent(n(a))+s+encodeURIComponent(n(e)):""};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function i(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var o=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}}));var o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)};function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)};function c(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}function u(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}Object.create;function l(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function h(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function f(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function d(e){return this instanceof d?(this.v=e,this):new d(e)}function p(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||a(e,t)}))})}function a(e,t){try{(n=i[e](t)).value instanceof d?Promise.resolve(n.value.v).then(c,u):l(o[0][2],n)}catch(e){l(o[0][3],e)}var n}function c(e){a("next",e)}function u(e){a("throw",e)}function l(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function b(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=l(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}}Object.create;function y(e){return"function"==typeof e}function g(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var v=g((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function m(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var _=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var e,t,n,r,i;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var s=l(o),a=s.next();!a.done;a=s.next()){a.value.remove(this)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}else o.remove(this);var c=this.initialTeardown;if(y(c))try{c()}catch(e){i=e instanceof v?e.errors:[e]}var u=this._finalizers;if(u){this._finalizers=null;try{for(var d=l(u),p=d.next();!p.done;p=d.next()){var b=p.value;try{S(b)}catch(e){i=null!=i?i:[],e instanceof v?i=f(f([],h(i)),h(e.errors)):i.push(e)}}}catch(e){n={error:e}}finally{try{p&&!p.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}}if(i)throw new v(i)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)S(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&m(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&m(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}(),w=_.EMPTY;function E(e){return e instanceof _||e&&"closed"in e&&y(e.remove)&&y(e.add)&&y(e.unsubscribe)}function S(e){y(e)?e():e.unsubscribe()}var A={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},R={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=R.delegate;return(null==i?void 0:i.setTimeout)?i.setTimeout.apply(i,f([e,t],h(n))):setTimeout.apply(void 0,f([e,t],h(n)))},clearTimeout:function(e){var t=R.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function O(e){R.setTimeout((function(){var t=A.onUnhandledError;if(!t)throw e;t(e)}))}function x(){}var T=C("C",void 0,void 0);function N(e){return C("N",e,void 0)}function C(e,t,n){return{kind:e,value:t,error:n}}var k=null;function P(e){if(A.useDeprecatedSynchronousErrorHandling){var t=!k;if(t&&(k={errorThrown:!1,error:null}),e(),t){var n=k,r=n.errorThrown,i=n.error;if(k=null,r)throw i}}else e()}var L=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,E(t)&&t.add(n)):n.destination=q,n}return s(t,e),t.create=function(e,t,n){return new D(e,t,n)},t.prototype.next=function(e){this.isStopped?B(N(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?B(C("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?B(T,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(_),I=Function.prototype.bind;function M(e,t){return I.call(e,t)}var j=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){U(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){U(e)}else U(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){U(e)}},e}(),D=function(e){function t(t,n,r){var i,o,s=e.call(this)||this;y(t)||!t?i={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:s&&A.useDeprecatedNextContext?((o=Object.create(t)).unsubscribe=function(){return s.unsubscribe()},i={next:t.next&&M(t.next,o),error:t.error&&M(t.error,o),complete:t.complete&&M(t.complete,o)}):i=t;return s.destination=new j(i),s}return s(t,e),t}(L);function U(e){var t;A.useDeprecatedSynchronousErrorHandling?(t=e,A.useDeprecatedSynchronousErrorHandling&&k&&(k.errorThrown=!0,k.error=t)):O(e)}function B(e,t){var n=A.onStoppedNotification;n&&R.setTimeout((function(){return n(e,t)}))}var q={closed:!0,next:x,error:function(e){throw e},complete:x},F="function"==typeof Symbol&&Symbol.observable||"@@observable";function H(e){return e}function W(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return V(e)}function V(e){return 0===e.length?H:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var $=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r,i=this,o=(r=e)&&r instanceof L||function(e){return e&&y(e.next)&&y(e.error)&&y(e.complete)}(r)&&E(r)?e:new D(e,t,n);return P((function(){var e=i,t=e.operator,n=e.source;o.add(t?t.call(o,n):n?i._subscribe(o):i._trySubscribe(o))})),o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=G(t))((function(t,r){var i=new D({next:function(t){try{e(t)}catch(e){r(e),i.unsubscribe()}},error:r,complete:t});n.subscribe(i)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[F]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return V(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=G(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function G(e){var t;return null!==(t=null!=e?e:A.Promise)&&void 0!==t?t:Promise}var z=g((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),J=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return s(t,e),t.prototype.lift=function(e){var t=new K(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new z},t.prototype.next=function(e){var t=this;P((function(){var n,r;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var i=l(t.currentObservers),o=i.next();!o.done;o=i.next()){o.value.next(e)}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}}))},t.prototype.error=function(e){var t=this;P((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}}))},t.prototype.complete=function(){var e=this;P((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this,r=n.hasError,i=n.isStopped,o=n.observers;return r||i?w:(this.currentObservers=null,o.push(e),new _((function(){t.currentObservers=null,m(o,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,r=t.thrownError,i=t.isStopped;n?e.error(r):i&&e.complete()},t.prototype.asObservable=function(){var e=new $;return e.source=this,e},t.create=function(e,t){return new K(e,t)},t}($),K=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return s(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:w},t}(J),X={now:function(){return(X.delegate||Date).now()},delegate:void 0},Y=function(e){function t(t,n,r){void 0===t&&(t=1/0),void 0===n&&(n=1/0),void 0===r&&(r=X);var i=e.call(this)||this;return i._bufferSize=t,i._windowTime=n,i._timestampProvider=r,i._buffer=[],i._infiniteTimeWindow=!0,i._infiniteTimeWindow=n===1/0,i._bufferSize=Math.max(1,t),i._windowTime=Math.max(1,n),i}return s(t,e),t.prototype.next=function(t){var n=this,r=n.isStopped,i=n._buffer,o=n._infiniteTimeWindow,s=n._timestampProvider,a=n._windowTime;r||(i.push(t),!o&&i.push(s.now()+a)),this._trimBuffer(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){this._throwIfClosed(),this._trimBuffer();for(var t=this._innerSubscribe(e),n=this._infiniteTimeWindow,r=this._buffer.slice(),i=0;i<r.length&&!e.closed;i+=n?1:2)e.next(r[i]);return this._checkFinalizedStatuses(e),t},t.prototype._trimBuffer=function(){var e=this,t=e._bufferSize,n=e._timestampProvider,r=e._buffer,i=e._infiniteTimeWindow,o=(i?1:2)*t;if(t<1/0&&o<r.length&&r.splice(0,r.length-o),!i){for(var s=n.now(),a=0,c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}},t}(J),Z={url:"",deserializer:function(e){return JSON.parse(e.data)},serializer:function(e){return JSON.stringify(e)}},Q=function(e){function t(t,n){var r=e.call(this)||this;if(r._socket=null,t instanceof $)r.destination=n,r.source=t;else{var i=r._config=a({},Z);if(r._output=new J,"string"==typeof t)i.url=t;else for(var o in t)t.hasOwnProperty(o)&&(i[o]=t[o]);if(!i.WebSocketCtor&&WebSocket)i.WebSocketCtor=WebSocket;else if(!i.WebSocketCtor)throw new Error("no WebSocket constructor can be found");r.destination=new Y}return r}return s(t,e),t.prototype.lift=function(e){var n=new t(this._config,this.destination);return n.operator=e,n.source=this,n},t.prototype._resetState=function(){this._socket=null,this.source||(this.destination=new Y),this._output=new J},t.prototype.multiplex=function(e,t,n){var r=this;return new $((function(i){try{r.next(e())}catch(e){i.error(e)}var o=r.subscribe({next:function(e){try{n(e)&&i.next(e)}catch(e){i.error(e)}},error:function(e){return i.error(e)},complete:function(){return i.complete()}});return function(){try{r.next(t())}catch(e){i.error(e)}o.unsubscribe()}}))},t.prototype._connectSocket=function(){var e=this,t=this._config,n=t.WebSocketCtor,r=t.protocol,i=t.url,o=t.binaryType,s=this._output,a=null;try{a=r?new n(i,r):new n(i),this._socket=a,o&&(this._socket.binaryType=o)}catch(e){return void s.error(e)}var c=new _((function(){e._socket=null,a&&1===a.readyState&&a.close()}));a.onopen=function(t){if(!e._socket)return a.close(),void e._resetState();var n=e._config.openObserver;n&&n.next(t);var r=e.destination;e.destination=L.create((function(t){if(1===a.readyState)try{var n=e._config.serializer;a.send(n(t))}catch(t){e.destination.error(t)}}),(function(t){var n=e._config.closingObserver;n&&n.next(void 0),t&&t.code?a.close(t.code,t.reason):s.error(new TypeError("WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }")),e._resetState()}),(function(){var t=e._config.closingObserver;t&&t.next(void 0),a.close(),e._resetState()})),r&&r instanceof Y&&c.add(r.subscribe(e.destination))},a.onerror=function(t){e._resetState(),s.error(t)},a.onclose=function(t){a===e._socket&&e._resetState();var n=e._config.closeObserver;n&&n.next(t),t.wasClean?s.complete():s.error(t)},a.onmessage=function(t){try{var n=e._config.deserializer;s.next(n(t))}catch(e){s.error(e)}}},t.prototype._subscribe=function(e){var t=this,n=this.source;return n?n.subscribe(e):(this._socket||this._connectSocket(),this._output.subscribe(e),e.add((function(){var e=t._socket;0===t._output.observers.length&&(!e||1!==e.readyState&&0!==e.readyState||e.close(),t._resetState())})),e)},t.prototype.unsubscribe=function(){var t=this._socket;!t||1!==t.readyState&&0!==t.readyState||t.close(),this._resetState(),e.prototype.unsubscribe.call(this)},t}(K);function ee(e){return function(t){if(function(e){return y(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}function te(e,t,n,r,i){return new ne(e,t,n,r,i)}var ne=function(e){function t(t,n,r,i,o,s){var a=e.call(this,t)||this;return a.onFinalize=o,a.shouldUnsubscribe=s,a._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,a._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,a}return s(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(L);function re(e,t){return ee((function(n,r){var i=0;n.subscribe(te(r,(function(n){r.next(e.call(t,n,i++))})))}))}var ie=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function oe(e){return y(null==e?void 0:e.then)}function se(e){return y(e[F])}function ae(e){return Symbol.asyncIterator&&y(null==e?void 0:e[Symbol.asyncIterator])}function ce(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var ue="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function le(e){return y(null==e?void 0:e[ue])}function he(e){return p(this,arguments,(function(){var t,n,r;return u(this,(function(i){switch(i.label){case 0:t=e.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,d(t.read())];case 3:return n=i.sent(),r=n.value,n.done?[4,d(void 0)]:[3,5];case 4:return[2,i.sent()];case 5:return[4,d(r)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function fe(e){return y(null==e?void 0:e.getReader)}function de(e){if(e instanceof $)return e;if(null!=e){if(se(e))return i=e,new $((function(e){var t=i[F]();if(y(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(ie(e))return r=e,new $((function(e){for(var t=0;t<r.length&&!e.closed;t++)e.next(r[t]);e.complete()}));if(oe(e))return n=e,new $((function(e){n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,O)}));if(ae(e))return pe(e);if(le(e))return t=e,new $((function(e){var n,r;try{for(var i=l(t),o=i.next();!o.done;o=i.next()){var s=o.value;if(e.next(s),e.closed)return}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}e.complete()}));if(fe(e))return pe(he(e))}var t,n,r,i;throw ce(e)}function pe(e){return new $((function(t){(function(e,t){var n,r,i,o;return c(this,void 0,void 0,(function(){var s,a;return u(this,(function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=b(e),c.label=1;case 1:return[4,n.next()];case 2:if((r=c.sent()).done)return[3,4];if(s=r.value,t.next(s),t.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=c.sent(),i={error:a},[3,11];case 6:return c.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}function be(e,t,n,r,i){void 0===r&&(r=0),void 0===i&&(i=!1);var o=t.schedule((function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()}),r);if(e.add(o),!i)return o}function ye(e,t,n,r,i,o,s,a){var c=[],u=0,l=0,h=!1,f=function(){!h||c.length||u||t.complete()},d=function(e){return u<r?p(e):c.push(e)},p=function(e){o&&t.next(e),u++;var a=!1;de(n(e,l++)).subscribe(te(t,(function(e){null==i||i(e),o?d(e):t.next(e)}),(function(){a=!0}),void 0,(function(){if(a)try{u--;for(var e=function(){var e=c.shift();s?be(t,s,(function(){return p(e)})):p(e)};c.length&&u<r;)e();f()}catch(e){t.error(e)}})))};return e.subscribe(te(t,d,(function(){h=!0,f()}))),function(){null==a||a()}}function ge(e,t,n){return void 0===n&&(n=1/0),y(t)?ge((function(n,r){return re((function(e,i){return t(n,e,r,i)}))(de(e(n,r)))}),n):("number"==typeof t&&(n=t),ee((function(t,r){return ye(t,r,e,n)})))}function ve(){return void 0===(e=1)&&(e=1/0),ge(H,e);var e}function me(e){return e&&y(e.schedule)}function _e(e){return e[e.length-1]}function we(e){return y(_e(e))?e.pop():void 0}function Ee(e){return me(_e(e))?e.pop():void 0}function Se(e,t){return void 0===t&&(t=0),ee((function(n,r){n.subscribe(te(r,(function(n){return be(r,e,(function(){return r.next(n)}),t)}),(function(){return be(r,e,(function(){return r.complete()}),t)}),(function(n){return be(r,e,(function(){return r.error(n)}),t)})))}))}function Ae(e,t){return void 0===t&&(t=0),ee((function(n,r){r.add(e.schedule((function(){return n.subscribe(r)}),t))}))}function Re(e,t){return de(e).pipe(Ae(t),Se(t))}function Oe(e,t){return de(e).pipe(Ae(t),Se(t))}function xe(e,t){return new $((function(n){var r=0;return t.schedule((function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())}))}))}function Te(e,t){return new $((function(n){var r;return be(n,t,(function(){r=e[ue](),be(n,t,(function(){var e,t,i;try{t=(e=r.next()).value,i=e.done}catch(e){return void n.error(e)}i?n.complete():n.next(t)}),0,!0)})),function(){return y(null==r?void 0:r.return)&&r.return()}}))}function Ne(e,t){if(!e)throw new Error("Iterable cannot be null");return new $((function(n){be(n,t,(function(){var r=e[Symbol.asyncIterator]();be(n,t,(function(){r.next().then((function(e){e.done?n.complete():n.next(e.value)}))}),0,!0)}))}))}function Ce(e,t){return Ne(he(e),t)}function ke(e,t){if(null!=e){if(se(e))return Re(e,t);if(ie(e))return xe(e,t);if(oe(e))return Oe(e,t);if(ae(e))return Ne(e,t);if(le(e))return Te(e,t);if(fe(e))return Ce(e,t)}throw ce(e)}function Pe(e,t){return t?ke(e,t):de(e)}function Le(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ve()(Pe(e,Ee(e)))}var Ie=new $((function(e){return e.complete()}));function Me(e,t){var n=y(e)?e:function(){return e},r=function(e){return e.error(n())};return new $(t?function(e){return t.schedule(r,0,e)}:r)}var je=function(e){function t(t,n){return e.call(this)||this}return s(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(_),De={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=De.delegate;return(null==i?void 0:i.setInterval)?i.setInterval.apply(i,f([e,t],h(n))):setInterval.apply(void 0,f([e,t],h(n)))},clearInterval:function(e){var t=De.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},Ue=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return s(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),De.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return t;De.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n,r=!1;try{this.work(e)}catch(e){r=!0,n=e||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),n},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,r=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,m(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(je),Be=function(){function e(t,n){void 0===n&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=X.now,e}(),qe=new(function(e){function t(t,n){void 0===n&&(n=Be.now);var r=e.call(this,t,n)||this;return r.actions=[],r._active=!1,r._scheduled=void 0,r}return s(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var n;this._active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(Be))(Ue),Fe=qe;function He(e,t,n){void 0===e&&(e=0),void 0===n&&(n=Fe);var r=-1;return null!=t&&(me(t)?n=t:r=t),new $((function(t){var i,o=(i=e)instanceof Date&&!isNaN(i)?+e-n.now():e;o<0&&(o=0);var s=0;return n.schedule((function(){t.closed||(t.next(s++),0<=r?this.schedule(void 0,r):t.complete())}),o)}))}var We,Ve,$e=Array.isArray;function Ge(e){return 1===e.length&&$e(e[0])?e[0]:e}function ze(e){return e<=0?function(){return Ie}:ee((function(t,n){var r=0;t.subscribe(te(n,(function(t){++r<=e&&(n.next(t),e<=r&&n.complete())})))}))}function Je(e){return re((function(){return e}))}function Ke(e,t){return t?function(n){return Le(t.pipe(ze(1),ee((function(e,t){e.subscribe(te(t,x))}))),n.pipe(Ke(e)))}:ge((function(t,n){return e(t,n).pipe(ze(1),Je(t))}))}function Xe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Ee(e);return Pe(e,n)}(Ve=We||(We={})).NEXT="N",Ve.ERROR="E",Ve.COMPLETE="C";var Ye=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){return Ze(this,e)},e.prototype.do=function(e,t,n){var r=this,i=r.kind,o=r.value,s=r.error;return"N"===i?null==e?void 0:e(o):"E"===i?null==t?void 0:t(s):null==n?void 0:n()},e.prototype.accept=function(e,t,n){var r;return y(null===(r=e)||void 0===r?void 0:r.next)?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){var e=this,t=e.kind,n=e.value,r=e.error,i="N"===t?Xe(n):"E"===t?Me((function(){return r})):"C"===t?Ie:0;if(!i)throw new TypeError("Unexpected notification kind "+t);return i},e.createNext=function(t){return new e("N",t)},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e}();function Ze(e,t){var n,r,i,o=e,s=o.kind,a=o.value,c=o.error;if("string"!=typeof s)throw new TypeError('Invalid notification, missing "kind"');"N"===s?null===(n=t.next)||void 0===n||n.call(t,a):"E"===s?null===(r=t.error)||void 0===r||r.call(t,c):null===(i=t.complete)||void 0===i||i.call(t)}var Qe=i("bqBrJ");class et{static isPatternMatchable(e){return"string"==typeof e&&e.includes(":")}compareStringToPattern(e,t){return"string"==typeof t?e.split("?")[0]===t:t.test(e)}uuid(){let e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){let n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)}))}nanoId(){let e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";return Array.from({length:8}).map((()=>e.charAt(Math.floor(Math.random()*e.length)))).join("")}isObjectEmpty(e){return 0===Object.keys(e).length}generateEventRequest(e,t){const n=this._matchStringToPattern(t,e);return n?{params:n,query:this._parseQueries(t),address:t}:null}getLiveRequest(e,t){const n=this._matchPartialPattern(t,e);return n?{params:n.params,query:this._parseQueries(t),nextPath:n.rest,address:t}:null}areEqual(e,t){return JSON.stringify(e)===JSON.stringify(t)}decrypt(e,t){const n=t=>{return(n=e,n.split("").map((e=>e.charCodeAt(0)))).reduce(((e,t)=>e^t),t);var n};try{return JSON.parse(Qe.Buffer.from(t,"base64").toString().match(/.{1,2}/g).map((e=>parseInt(e,16))).map(n).map((e=>String.fromCharCode(e))).join(""))}catch(e){return null}}encrypt(e,t){const n=e=>e.split("").map((e=>e.charCodeAt(0))),r=JSON.stringify(t).split("").map(n).map((t=>n(e).reduce(((e,t)=>e^t),t))).map((e=>("0"+Number(e).toString(16)).substr(-2))).join("");return Qe.Buffer.from(r).toString("base64")}_parseQueries(e){const t={},n=e.split("?")[1];return n&&n.split("&").forEach((e=>{const[n,r]=e.split("=");t[n]=r})),t}_matchString(e,t){const n=t.replace(/:[^\/]+/g,"([^/]+)"),r=new RegExp(`^${n}$`),i=e.split("?")[0].match(r);if(i){const e=t.match(/:[^\/]+/g);if(e){const t={};return e.forEach(((e,n)=>{t[e.replace(":","")]=i[n+1].replace(/\?.*$/,"")})),t}}return null}_matchPartialPattern(e,t){if(et.isPatternMatchable(t)){const n=new RegExp(t.replace(/:[^\/]+/g,"([^/?]+)")),r=e.match(n);if(r){const n=t.match(/:[^\/]+/g);if(n){const t={};return n.forEach(((e,n)=>{t[e.replace(":","")]=r[n+1].replace(/\?.*$/,"")})),{params:t,rest:e.replace(r[0],"")}}}}return this.compareStringToPattern(e,t)?{params:{},rest:""}:e.startsWith(t)?{params:{},rest:e.replace(t,"")}:null}_matchStringToPattern(e,t){if(et.isPatternMatchable(t))return this._matchString(e,t);return this.compareStringToPattern(e,t)?{}:null}}class tt{constructor(e,t,n){this.errorMessage=e,this.errorCode=t,this.data=n}}function nt(e,t){return new Promise((async(n,r)=>{let i=!1;const o=(t,n)=>{i=!0,r(new tt(t,n||500,e))},s=async e=>{i=!0,n(e)};try{await t(s,o),i||r(new tt("Function did not resolve a Promise",500,e))}catch(t){r(t instanceof tt?t:new tt(t.message,500,e))}}))}class rt{_subscribers=new Set;subscribe(e){return this._subscribers.add(e),{unsubscribe:()=>{this._subscribers.delete(e)}}}publish(e){let t;for(const n of this._subscribers)try{if(t=n(e),t)break}catch(e){throw e}return t}}class it extends rt{constructor(e){super(),this._value=e}get value(){return this._value}subscribe(e){return e(this._value),super.subscribe(e)}publish(e){if(this._value!==e)return this._value=e,super.publish(e)}}let ot;var st;let at;var ct;(st=ot||(ot={})).POND="POND",st.CHANNEL="CHANNEL",(ct=at||(at={})).ADD_TO_POND="ADD_TO_POND",ct.REMOVE_FROM_POND="REMOVE_FROM_POND",ct.UPDATE_IN_POND="UPDATE_IN_POND";class ut{constructor(e,t,n,r){this._id=e,this._doc=t,this._removeDoc=n,this._updateDoc=r}get id(){return this._id}get doc(){return this._doc}removeDoc(){return this._removeDoc(),this._doc}updateDoc(e){this._doc=this._updateDoc(e).doc}}class lt{constructor(){this._db={},this._broadcast=new rt}get size(){return Object.keys(this._db).length}get(e){const t=this._db[e];return t?this._createPondDocument(e,t):null}set(e){const t=this._nanoid();return this._db[t]=e,this._broadcast.publish({oldValue:null,currentValue:e}),this._createPondDocument(t,e)}update(e,t){if(this._db[e])return this._db[e]=t,this._broadcast.publish({oldValue:this._db[e],currentValue:t}),this._createPondDocument(e,t);throw new tt(`Key ${e} does not exist in the pond`,404,e)}createDocument(e){let t=this._createPondDocument(this._nanoid(),void 0);const n=e(t);return this._db[t.id]=n,t.updateDoc(n),this._broadcast.publish({oldValue:null,currentValue:n}),t}merge(e){for(const t in e._db)this._db[t]=e._db[t];return this}*generate(){for(const e in this._db)yield this._db[e]}query(e){const t=[];for(const n in this._db){const r=this._db[n];e(r)&&t.push(this._createPondDocument(n,r))}return t}queryById(e){const t=[];for(const n in this._db)e(n)&&t.push(this._createPondDocument(n,this._db[n]));return t}queryByKeys(e){return e.map((e=>this.get(e))).filter((e=>null!==e))}reduce(e,t){let n=0;for(const r in this._db)t=e(t,this._db[r],n),n++;return t}find(e){for(const t in this._db){const n=this._db[t];if(e(n))return this._createPondDocument(t,n)}return null}map(e){return Object.values(this._db).map(e)}clear(){Object.keys(this._db).forEach((e=>this._delete(e)))}subscribe(e){return this._broadcast.subscribe((t=>{let n=at.UPDATE_IN_POND;null===t.oldValue?n=at.ADD_TO_POND:null===t.currentValue&&(n=at.REMOVE_FROM_POND),e(Object.values(this._db),t.currentValue,n)}))}toArray(){const e=[];for(const t in this._db){const n=this._db[t];e.push(this._createPondDocument(t,n))}return e}_delete(e){delete this._db[e],this._broadcast.publish({oldValue:this._db[e],currentValue:null})}_nanoid=()=>{let e="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<21;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e};_createPondDocument(e,t){const n=this._delete.bind(this,e),r=this.update.bind(this,e);return new ut(e,t,n,r)}}let ht;var ft;let dt;var pt;let bt;var yt;let gt;var vt;(ft=ht||(ht={})).ERROR="ERROR",ft.MESSAGE="MESSAGE",ft.PRESENCE="PRESENCE",ft.CLOSE="CLOSE",(pt=dt||(dt={})).JOIN_CHANNEL="JOIN_CHANNEL",pt.LEAVE_CHANNEL="LEAVE_CHANNEL",pt.UPDATE_PRESENCE="UPDATE_PRESENCE",pt.BROADCAST_FROM="BROADCAST_FROM",pt.BROADCAST="BROADCAST",pt.SEND_MESSAGE_TO_USER="SEND_MESSAGE_TO_USER",(yt=bt||(bt={})).BROADCAST="BROADCAST",yt.BROADCAST_FROM="BROADCAST_FROM",yt.SEND_MESSAGE_TO_USER="SEND_MESSAGE_TO_USER",(vt=gt||(gt={})).SERVER="SERVER",vt.ENDPOINT="ENDPOINT",vt.POND_CHANNEL="POND_CHANNEL";class mt extends et{constructor(e,t){super(),this.name=e,this._channelPresence=new lt,this._channelAssigns={},this._channelData={},this._broadcast=new rt,this.removeChannel=t,this._messages=new rt}get info(){const e={name:this.name,channelData:this.data,presence:this.presence,assigns:this.assigns};return Object.freeze(e)}get data(){const e={...this._channelData};return Object.freeze(e)}set data(e){this._channelData={...this._channelData,...e}}get presence(){return this._channelPresence.toArray().map((e=>e.doc))}get assigns(){const e={};return Object.keys(this._channelAssigns).forEach((t=>{const{presenceId:n,...r}=this._channelAssigns[t];e[t]=r})),e}hasUser(e){return!!this._channelAssigns[e]}addUser(e){const t=e.client.clientId;if(this.hasUser(t))throw new tt("User already exists in channel",5001,t);const n=this._channelPresence.set({...e.presence,id:t});this._channelAssigns[t]={...e.assigns,presenceId:n.id},this._channelData={...this._channelData,...e.channelData},this._broadcast.publish({event:"JOIN_CHANNEL",channelName:this.name,action:ht.PRESENCE,payload:{presence:this.presence,change:{...e.presence,id:t}},channel:this,clientId:gt.POND_CHANNEL,clientAssigns:e.assigns,clientPresence:{...e.presence,id:t}})}getUserInfo(e){const t=this._retrieveUser(e);return t?{presence:t.presence.doc,assigns:t.assigns}:null}removeUser(e){(Array.isArray(e)?e:[e]).forEach((e=>{const t=this._retrieveUser(e);t&&(t.presence.removeDoc(),delete this._channelAssigns[e],this._broadcast.publish({event:"LEAVE_CHANNEL",channelName:this.name,action:ht.PRESENCE,payload:{presence:this.presence,change:null},channel:this,clientId:gt.POND_CHANNEL,clientAssigns:t.assigns,clientPresence:t.presence.doc}))})),0===this._channelPresence.size&&(this._broadcast.publish({event:"REMOVE_CHANNEL",channelName:this.name,action:ht.CLOSE,payload:{},channel:this,clientId:gt.POND_CHANNEL,clientAssigns:{},clientPresence:{}}),this.removeChannel())}broadcast(e,t,n=gt.POND_CHANNEL){const r=this._retrieveUser(n);if(!r&&!Object.values(gt).includes(n))throw new tt("Client not found",5002,n);const i={action:ht.MESSAGE,payload:t,event:e,channelName:this.name},o=this._broadcast.publish({...i,channel:this,clientId:n,clientAssigns:r?r.assigns:{},clientPresence:r?r.presence.doc:{}});if(o instanceof tt)throw o;this._sendToClients(Object.keys(this._channelAssigns),i)}broadcastFrom(e,t,n){const r=this._retrieveUser(n);if(!r)throw new tt("Client not found",5002,n);const i={action:ht.MESSAGE,payload:t,event:e,channelName:this.name},o=this._broadcast.publish({...i,channel:this,clientId:n,clientAssigns:r.assigns,clientPresence:r.presence.doc});if(o instanceof tt)throw o;const s=Object.keys(this._channelAssigns).filter((e=>e!==n));this._sendToClients(s,i)}sendTo(e,t,n,r){const i=this._retrieveUser(n);if(!i&&!Object.values(gt).includes(n))throw new tt("Client not found",5002,n);const o=Array.isArray(r)?r:[r],s=o.filter((e=>!this._channelAssigns[e]));if(s.length>0)throw new tt("Recipient not found",5002,s);const a={action:ht.MESSAGE,payload:t,event:e,channelName:this.name},c=this._broadcast.publish({...a,channel:this,clientId:n,clientAssigns:i?.assigns||{},clientPresence:i?.presence.doc||{}});if(c instanceof tt)throw c;this._sendToClients(o,a)}subscribe(e){return this._broadcast.subscribe(e)}updateUser(e,t,n){const r=this._retrieveUser(e);if(r){this._channelAssigns[e]={...r.assigns,...n,presenceId:r.presence.id};const i={...r.presence.doc,...t,id:e};this.areEqual(i,r.presence.doc)||(r.presence.updateDoc(i),this._broadcast.publish({event:"UPDATE_CHANNEL",channelName:this.name,action:ht.PRESENCE,payload:{presence:this.presence,change:{clientId:e,presence:t,assigns:n}},channel:this,clientId:gt.POND_CHANNEL,clientAssigns:{...r.assigns,...n},clientPresence:{...i}}))}}subscribeToMessages(e,t){const n=this._messages.subscribe((({clients:n,message:r})=>{n.includes(e)&&t(r)})),r=this._channelPresence.subscribe(((e,n,r)=>{const i={action:ht.PRESENCE,payload:{presence:e,change:n},event:r,channelName:this.name};t(i)}));return{unsubscribe:()=>{n.unsubscribe(),r.unsubscribe()}}}_sendToClients(e,t){this._messages.publish({clients:e,message:t})}_retrieveUser(e){const t=this._channelAssigns[e],n=this._channelPresence.get(t?.presenceId||"");if(t&&null!==n){const{presenceId:e,...r}=t;return{assigns:r,presence:n}}return null}}class _t{constructor(e,t,n,r=!0){this._executed=!1,this._data=e,this.resolver=n,this._assigns=t,this._isChannel=r}send(e,t,n){return this._message={event:e,payload:t},this._execute(n)}accept(e){return this._execute(e)}reject(e,t){return e=e||(this._isChannel?"Message":"Connection")+" rejected",t=t||403,this._error={errorMessage:e,errorCode:t},this._execute({})}_execute(e){if(this._executed)throw new tt("Response has already been sent",500,this._data);{this._executed=!0;const t={assigns:this._mergeAssigns(e),message:this._message,error:this._error};this.resolver(t)}}_mergeAssigns(e){if(void 0===e)return this._assigns;const t=e,n=this._assigns;return{presence:{...n.presence,...t.presence},channelData:{...n.channelData,...t.channelData},assigns:{...n.assigns,...t.assigns}}}}class wt extends et{constructor(e,t){super(),this._channels=new lt,this._handler=t,this.path=e,this._subscribers=new Set,this._subscriptions={}}get info(){return this._channels.map((e=>e.info))}static _sendMessage(e,t){e.send(JSON.stringify(t))}on(e,t){const n=this._buildHandler(e,t);this._subscribers.add(n)}addUser(e,t,n){return nt({channelName:t},(async(r,i)=>{let o;o=this._channels.query((e=>e.name===t))[0]?.doc;const s=this.generateEventRequest(this.path,t);if(!s)return i("Invalid channel name",400);o||(o=await this._createChannel(t));const a={assigns:e.assigns,presence:{},channelData:o.data},c={joinParams:n,...s,clientId:e.clientId,channelName:t,clientAssigns:e.assigns},u=new _t({channelName:t},a,(n=>{if(n.error)return i(n.error.errorMessage,n.error.errorCode);const{assigns:s,presence:a,channelData:c}=n.assigns;this._subscriptions[e.clientId]=this._subscriptions[e.clientId]||[];const u=o.subscribeToMessages(e.clientId,(t=>{wt._sendMessage(e.socket,t)}));o.addUser({presence:a,assigns:s,channelData:c,client:e}),this._subscriptions[e.clientId].push({name:t,sub:u}),n.message&&o.sendTo(n.message.event,n.message.payload,gt.POND_CHANNEL,[e.clientId]),r()}));await this._handler(c,u,o)}))}broadcastToChannel(e,t,n){this._execute(e,(e=>{e.broadcast(t,n,gt.POND_CHANNEL)}))}closeFromChannel(e,t){this._execute(e,(n=>{this._removeSubscriptions(t,e),n.removeUser(t)}))}modifyPresence(e,t,n){this._execute(e,(e=>{e.updateUser(t,n.presence||{},n.assigns||{})}))}getChannelInfo(e){return this._execute(e,(e=>e.info))}send(e,t,n,r){const i=Array.isArray(t)?t:[t];this._execute(e,(e=>{e.sendTo(n,r,gt.POND_CHANNEL,i)}))}findChannel(e){return this._channels.find(e)?.doc||null}subscribe(e,t){const n=this._channels.query((t=>t.name===e))[0];if(n)return n.doc.subscribe(t);return this._createChannel(e).subscribe(t)}removeUser(e){if(this._subscriptions[e]){this._subscriptions[e].forEach((e=>e.sub.unsubscribe())),delete this._subscriptions[e];for(const t of this._channels.generate())t.hasUser(e)&&t.removeUser(e)}}_execute(e,t){const n=this.findChannel((t=>t.name===e))||null;if(n)return t(n);throw new tt("Channel does not exist",404,e)}_createChannel(e){const t=this._channels.createDocument((t=>new mt(e,t.removeDoc.bind(t))));return this._subscribers.forEach((e=>{t.doc.subscribe(e)})),t.doc}_removeSubscriptions(e,t){(Array.isArray(e)?e:[e]).forEach((e=>{const n=this._subscriptions[e];if(n){const e=n.find((e=>e.name===t));e&&(e.sub.unsubscribe(),n.splice(n.indexOf(e),1))}}))}_buildHandler(e,t){return n=>{let r;const i=this.generateEventRequest(e,n.event);if(i){const e={assigns:n.clientAssigns,presence:n.clientPresence,channelData:n.channel.data},o={channelName:n.channelName,message:n.payload,params:i.params,query:i.query,event:n.event,client:{clientId:n.clientId,clientAssigns:n.clientAssigns,clientPresence:n.clientPresence}},s=e=>{const{presence:t,assigns:i,channelData:o}=e.assigns;e.error?r=new tt(e.error.errorMessage,e.error.errorCode,{event:n.event,channelName:n.channelName}):(this.isObjectEmpty(o)||(n.channel.data=o),Object.values(gt).includes(n.clientId)||(n.channel.updateUser(n.clientId,t,i),e.message&&n.channel.sendTo(e.message.event,e.message.payload,gt.POND_CHANNEL,[n.clientId])))},a=new _t(n.clientId,e,s);t(o,a,n.channel)}return r||!!i}}}class Et extends et{constructor(e,t){super(),this._channels=new lt,this._sockets=new lt,this._handler=t,this._server=e}static _sendMessage(e,t){e.send(JSON.stringify(t))}createChannel(e,t){const n=new wt(e,t);return this._channels.set(n),n}authoriseConnection(e,t,n,r){return nt(t,(async(i,o)=>{const s=this._sockets.set({}),a={request:e,...r,clientId:s.id},c=new _t(t,{assigns:{},presence:{},channelData:{}},(r=>{if(r.error)return s.removeDoc(),o(r.error.errorMessage,r.error.errorCode);this._server.handleUpgrade(e,t,n,(e=>{this._server.emit("connection",e);let t={socket:e,assigns:r.assigns.assigns};if(s.updateDoc(t),this._manageSocket(s),r.message){const t={action:ht.MESSAGE,event:r.message.event,channelName:"SERVER",payload:r.message.payload};Et._sendMessage(e,t)}i()}))}),!1);await this._handler(a,c,this)}))}closeConnection(e){const t={action:ht.CLOSE,channelName:"SERVER",event:"CLOSED_FROM_SERVER",payload:{}},n=JSON.stringify(t),r=this._sockets.get(e);r&&(r.doc.socket.send(n),r.doc.socket.close(),r.removeDoc())}send(e,t,n){const r={action:ht.MESSAGE,channelName:gt.ENDPOINT,event:t,payload:n},i=JSON.stringify(r),o=Array.isArray(e)?e:[e];this._sockets.queryByKeys(o).forEach((e=>e.doc.socket.send(i)))}listChannels(){return this._channels.map((e=>e.info)).flat()}listConnections(){return this._sockets.map((e=>e.socket))}broadcast(e,t){const n=[...this._sockets.generate()],r={action:ht.MESSAGE,channelName:gt.ENDPOINT,event:e,payload:t},i=JSON.stringify(r);n.forEach((e=>e.socket.send(i)))}_findChannel(e){const t=this._findPondChannel(e);if(t){const n=t.doc.findChannel((t=>t.name===e));if(n)return n}}_manageSocket(e){const t=e.doc.socket;t.addEventListener("message",(t=>this._readMessage(e,t.data))),t.addEventListener("close",(()=>{for(const t of this._channels.generate())t.removeUser(e.id);e.removeDoc()})),t.addEventListener("error",(()=>{for(const t of this._channels.generate())t.removeUser(e.id);e.removeDoc()}))}_findPondChannel(e){return this._channels.find((t=>null!==this.generateEventRequest(t.path,e)))}async _readMessage(e,t){const n={action:ht.ERROR,event:"INVALID_MESSAGE",channelName:gt.ENDPOINT,payload:{}};try{const r=JSON.parse(t);r.action?r.channelName?r.payload?await this._handleMessage(e,r):n.payload={message:"No payload provided"}:n.payload={message:"No channel name provided"}:n.payload={message:"No action provided"},this.isObjectEmpty(n.payload)||Et._sendMessage(e.doc.socket,n)}catch(t){if(t instanceof SyntaxError){const t={action:ht.ERROR,event:"INVALID_MESSAGE",channelName:gt.ENDPOINT,payload:{message:"Invalid message"}};Et._sendMessage(e.doc.socket,t)}else if(t instanceof tt){const n={action:ht.ERROR,event:t.data?.event||"INVALID_MESSAGE",channelName:t.data?.channelName||"END_POINT",payload:{message:t.errorMessage,code:t.errorCode,data:t.data.event?void 0:t.data}};Et._sendMessage(e.doc.socket,n)}}}async _handleMessage(e,t){switch(t.action){case"JOIN_CHANNEL":const n=this._findPondChannel(t.channelName);if(!n)throw new tt("The channel was not found",4004,{channelName:t.channelName,event:"JOIN_CHANNEL"});{const r={clientId:e.id,socket:e.doc.socket,assigns:e.doc.assigns};await n.doc.addUser(r,t.channelName,t.payload)}break;case"LEAVE_CHANNEL":await this._channelAction(t.channelName,"LEAVE_CHANNEL",(t=>{t.removeUser(e.id)}));break;case"BROADCAST_FROM":await this._channelAction(t.channelName,t.event,(async n=>{await n.broadcastFrom(t.event,t.payload,e.id)}));break;case"BROADCAST":await this._channelAction(t.channelName,t.event,(async n=>{n.broadcast(t.event,t.payload,e.id)}));break;case"SEND_MESSAGE_TO_USER":await this._channelAction(t.channelName,t.event,(async n=>{if(!t.addresses||0===t.addresses.length)throw new tt("No addresses provided",400,{event:t.event,channelName:t.channelName});n.sendTo(t.event,t.payload,e.id,t.addresses)}));break;case"UPDATE_PRESENCE":await this._channelAction(t.channelName,"UPDATE_PRESENCE",(async n=>{await n.updateUser(e.id,t.payload?.presence||{},t.payload?.assigns||{})}))}}_channelAction(e,t,n){const r=this._findChannel(e);if(!r)throw new tt("Channel not found",404,{channelName:e,event:t});return n(r)}}var St,At,Rt,Ot,xt,Tt,Nt,Ct,kt,Pt={},Lt=(Qe=i("bqBrJ")).Buffer,It=i("ePtPP");function Mt(){if(void 0!==kt)return kt;if(e.XMLHttpRequest){kt=new e.XMLHttpRequest;try{kt.open("GET",e.XDomainRequest?"/":"https://example.com")}catch(e){kt=null}}else kt=null;return kt}function jt(e){var t=Mt();if(!t)return!1;try{return t.responseType=e,t.responseType===e}catch(e){}return!1}function Dt(e){return"function"==typeof e}At=Dt(e.fetch)&&Dt(e.ReadableStream),Rt=Dt(e.WritableStream),Ot=Dt(e.AbortController),xt=At||jt("arraybuffer"),Tt=!At&&jt("ms-stream"),Nt=!At&&jt("moz-chunked-arraybuffer"),Ct=At||!!Mt()&&Dt(Mt().overrideMimeType),kt=null;var Ut,Bt,qt=i("5jAh8"),Ft=(Qe=i("bqBrJ")).Buffer,Ht=(It=i("ePtPP"),qt=i("5jAh8"),i("8IqCp")),Wt=Ut={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},Vt=Bt=function(e,t,n,r){var i=this;if(Ht.Readable.call(i),i._mode=n,i.headers={},i.rawHeaders=[],i.trailers={},i.rawTrailers=[],i.on("end",(function(){It.nextTick((function(){i.emit("close")}))})),"fetch"===n){if(i._fetchResponse=t,i.url=t.url,i.statusCode=t.status,i.statusMessage=t.statusText,t.headers.forEach((function(e,t){i.headers[t.toLowerCase()]=e,i.rawHeaders.push(t,e)})),Rt){var o=new WritableStream({write:function(e){return r(!1),new Promise((function(t,n){i._destroyed?n():i.push(Ft.from(e))?t():i._resumeFetch=t}))},close:function(){r(!0),i._destroyed||i.push(null)},abort:function(e){r(!0),i._destroyed||i.emit("error",e)}});try{return void t.body.pipeTo(o).catch((function(e){r(!0),i._destroyed||i.emit("error",e)}))}catch(e){}}var s=t.body.getReader();!function e(){s.read().then((function(t){i._destroyed||(r(t.done),t.done?i.push(null):(i.push(Ft.from(t.value)),e()))})).catch((function(e){r(!0),i._destroyed||i.emit("error",e)}))}()}else{if(i._xhr=e,i._pos=0,i.url=e.responseURL,i.statusCode=e.status,i.statusMessage=e.statusText,e.getAllResponseHeaders().split(/\r?\n/).forEach((function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var n=t[1].toLowerCase();"set-cookie"===n?(void 0===i.headers[n]&&(i.headers[n]=[]),i.headers[n].push(t[2])):void 0!==i.headers[n]?i.headers[n]+=", "+t[2]:i.headers[n]=t[2],i.rawHeaders.push(t[1],t[2])}})),i._charset="x-user-defined",!Ct){var a=i.rawHeaders["mime-type"];if(a){var c=a.match(/;\s*charset=([^;])(;|$)/);c&&(i._charset=c[1].toLowerCase())}i._charset||(i._charset="utf-8")}}};qt(Vt,Ht.Readable),Vt.prototype._read=function(){var e=this._resumeFetch;e&&(this._resumeFetch=null,e())},Vt.prototype._onXHRProgress=function(t){var n=this,r=n._xhr,i=null;switch(n._mode){case"text":if((i=r.responseText).length>n._pos){var o=i.substr(n._pos);if("x-user-defined"===n._charset){for(var s=Ft.alloc(o.length),a=0;a<o.length;a++)s[a]=255&o.charCodeAt(a);n.push(s)}else n.push(o,n._charset);n._pos=i.length}break;case"arraybuffer":if(r.readyState!==Wt.DONE||!r.response)break;i=r.response,n.push(Ft.from(new Uint8Array(i)));break;case"moz-chunked-arraybuffer":if(i=r.response,r.readyState!==Wt.LOADING||!i)break;n.push(Ft.from(new Uint8Array(i)));break;case"ms-stream":if(i=r.response,r.readyState!==Wt.LOADING)break;var c=new e.MSStreamReader;c.onprogress=function(){c.result.byteLength>n._pos&&(n.push(Ft.from(new Uint8Array(c.result.slice(n._pos)))),n._pos=c.result.byteLength)},c.onload=function(){t(!0),n.push(null)},c.readAsArrayBuffer(i)}n._xhr.readyState===Wt.DONE&&"ms-stream"!==n._mode&&(t(!0),n.push(null))};Ht=i("8IqCp");var $t=Bt,Gt=Ut;var zt=St=function(e){var t,n=this;Ht.Writable.call(n),n._opts=e,n._body=[],n._headers={},e.auth&&n.setHeader("Authorization","Basic "+Lt.from(e.auth).toString("base64")),Object.keys(e.headers).forEach((function(t){n.setHeader(t,e.headers[t])}));var r=!0;if("disable-fetch"===e.mode||"requestTimeout"in e&&!Ot)r=!1,t=!0;else if("prefer-streaming"===e.mode)t=!1;else if("allow-wrong-content-type"===e.mode)t=!Ct;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");t=!0}n._mode=function(e,t){return At&&t?"fetch":Nt?"moz-chunked-arraybuffer":Tt?"ms-stream":xt&&e?"arraybuffer":"text"}(t,r),n._fetchTimer=null,n._socketTimeout=null,n._socketTimer=null,n.on("finish",(function(){n._onFinish()}))};qt(zt,Ht.Writable),zt.prototype.setHeader=function(e,t){var n=e.toLowerCase();-1===Jt.indexOf(n)&&(this._headers[n]={name:e,value:t})},zt.prototype.getHeader=function(e){var t=this._headers[e.toLowerCase()];return t?t.value:null},zt.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},zt.prototype._onFinish=function(){var t=this;if(!t._destroyed){var n=t._opts;"timeout"in n&&0!==n.timeout&&t.setTimeout(n.timeout);var r=t._headers,i=null;"GET"!==n.method&&"HEAD"!==n.method&&(i=new Blob(t._body,{type:(r["content-type"]||{}).value||""}));var o=[];if(Object.keys(r).forEach((function(e){var t=r[e].name,n=r[e].value;Array.isArray(n)?n.forEach((function(e){o.push([t,e])})):o.push([t,n])})),"fetch"===t._mode){var s=null;if(Ot){var a=new AbortController;s=a.signal,t._fetchAbortController=a,"requestTimeout"in n&&0!==n.requestTimeout&&(t._fetchTimer=e.setTimeout((function(){t.emit("requestTimeout"),t._fetchAbortController&&t._fetchAbortController.abort()}),n.requestTimeout))}e.fetch(t._opts.url,{method:t._opts.method,headers:o,body:i||void 0,mode:"cors",credentials:n.withCredentials?"include":"same-origin",signal:s}).then((function(e){t._fetchResponse=e,t._resetTimers(!1),t._connect()}),(function(e){t._resetTimers(!0),t._destroyed||t.emit("error",e)}))}else{var c=t._xhr=new e.XMLHttpRequest;try{c.open(t._opts.method,t._opts.url,!0)}catch(e){return void It.nextTick((function(){t.emit("error",e)}))}"responseType"in c&&(c.responseType=t._mode),"withCredentials"in c&&(c.withCredentials=!!n.withCredentials),"text"===t._mode&&"overrideMimeType"in c&&c.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in n&&(c.timeout=n.requestTimeout,c.ontimeout=function(){t.emit("requestTimeout")}),o.forEach((function(e){c.setRequestHeader(e[0],e[1])})),t._response=null,c.onreadystatechange=function(){switch(c.readyState){case Gt.LOADING:case Gt.DONE:t._onXHRProgress()}},"moz-chunked-arraybuffer"===t._mode&&(c.onprogress=function(){t._onXHRProgress()}),c.onerror=function(){t._destroyed||(t._resetTimers(!0),t.emit("error",new Error("XHR error")))};try{c.send(i)}catch(e){return void It.nextTick((function(){t.emit("error",e)}))}}}},zt.prototype._onXHRProgress=function(){var e=this;e._resetTimers(!1),function(e){try{var t=e.status;return null!==t&&0!==t}catch(e){return!1}}(e._xhr)&&!e._destroyed&&(e._response||e._connect(),e._response._onXHRProgress(e._resetTimers.bind(e)))},zt.prototype._connect=function(){var e=this;e._destroyed||(e._response=new $t(e._xhr,e._fetchResponse,e._mode,e._resetTimers.bind(e)),e._response.on("error",(function(t){e.emit("error",t)})),e.emit("response",e._response))},zt.prototype._write=function(e,t,n){this._body.push(e),n()},zt.prototype._resetTimers=function(t){var n=this;e.clearTimeout(n._socketTimer),n._socketTimer=null,t?(e.clearTimeout(n._fetchTimer),n._fetchTimer=null):n._socketTimeout&&(n._socketTimer=e.setTimeout((function(){n.emit("timeout")}),n._socketTimeout))},zt.prototype.abort=zt.prototype.destroy=function(e){var t=this;t._destroyed=!0,t._resetTimers(!0),t._response&&(t._response._destroyed=!0),t._xhr?t._xhr.abort():t._fetchAbortController&&t._fetchAbortController.abort(),e&&t.emit("error",e)},zt.prototype.end=function(e,t,n){"function"==typeof e&&(n=e,e=void 0),Ht.Writable.prototype.end.call(this,e,t,n)},zt.prototype.setTimeout=function(e,t){var n=this;t&&n.once("timeout",t),n._socketTimeout=e,n._resetTimers(!1)},zt.prototype.flushHeaders=function(){},zt.prototype.setNoDelay=function(){},zt.prototype.setSocketKeepAlive=function(){};var Jt=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],Kt={};Kt=function(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)Xt.call(n,r)&&(e[r]=n[r])}return e};var Xt=Object.prototype.hasOwnProperty;var Yt,Zt;Yt={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"};var Qt,en=i("izynC");function tn(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}Qt={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}},Zt=gn;var nn,rn,on=/^([a-z0-9.+-]+:)/i,sn=/:[0-9]*$/,an=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,cn=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),un=["'"].concat(cn),ln=["%","/","?",";","#"].concat(un),hn=["/","?","#"],fn=/^[+a-z0-9A-Z_-]{0,63}$/,dn=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,pn={javascript:!0,"javascript:":!0},bn={javascript:!0,"javascript:":!0},yn={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function gn(e,t,n){if(e&&Qt.isObject(e)&&e instanceof tn)return e;var r=new tn;return r.parse(e,t,n),r}nn=i("irK6S"),rn=i("h75Bs"),tn.prototype.parse=function(e,t,n){if(!Qt.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),i=-1!==r&&r<e.indexOf("#")?"?":"#",o=e.split(i);o[0]=o[0].replace(/\\/g,"/");var s=e=o.join(i);if(s=s.trim(),!n&&1===e.split("#").length){var a=an.exec(s);if(a)return this.path=s,this.href=s,this.pathname=a[1],a[2]?(this.search=a[2],this.query=t?nn(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var c=on.exec(s);if(c){var u=(c=c[0]).toLowerCase();this.protocol=u,s=s.substr(c.length)}if(n||c||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var l="//"===s.substr(0,2);!l||c&&bn[c]||(s=s.substr(2),this.slashes=!0)}if(!bn[c]&&(l||c&&!yn[c])){for(var h,f,d=-1,p=0;p<hn.length;p++){-1!==(b=s.indexOf(hn[p]))&&(-1===d||b<d)&&(d=b)}-1!==(f=-1===d?s.lastIndexOf("@"):s.lastIndexOf("@",d))&&(h=s.slice(0,f),s=s.slice(f+1),this.auth=decodeURIComponent(h)),d=-1;for(p=0;p<ln.length;p++){var b;-1!==(b=s.indexOf(ln[p]))&&(-1===d||b<d)&&(d=b)}-1===d&&(d=s.length),this.host=s.slice(0,d),s=s.slice(d),this.parseHost(),this.hostname=this.hostname||"";var y="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!y)for(var g=this.hostname.split(/\./),v=(p=0,g.length);p<v;p++){var m=g[p];if(m&&!m.match(fn)){for(var _="",w=0,E=m.length;w<E;w++)m.charCodeAt(w)>127?_+="x":_+=m[w];if(!_.match(fn)){var S=g.slice(0,p),A=g.slice(p+1),R=m.match(dn);R&&(S.push(R[1]),A.unshift(R[2])),A.length&&(s="/"+A.join(".")+s),this.hostname=S.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=en.toASCII(this.hostname));var O=this.port?":"+this.port:"",x=this.hostname||"";this.host=x+O,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!pn[u])for(p=0,v=un.length;p<v;p++){var T=un[p];if(-1!==s.indexOf(T)){var N=encodeURIComponent(T);N===T&&(N=escape(T)),s=s.split(T).join(N)}}var C=s.indexOf("#");-1!==C&&(this.hash=s.substr(C),s=s.slice(0,C));var k=s.indexOf("?");if(-1!==k?(this.search=s.substr(k),this.query=s.substr(k+1),t&&(this.query=nn(this.query)),s=s.slice(0,k)):t&&(this.search="",this.query={}),s&&(this.pathname=s),yn[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){O=this.pathname||"";var P=this.search||"";this.path=O+P}return this.href=this.format(),this},tn.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&Qt.isObject(this.query)&&Object.keys(this.query).length&&(o=rn(this.query));var s=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||yn[t])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),t+i+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(s=s.replace("#","%23"))+r},tn.prototype.resolve=function(e){return this.resolveObject(gn(e,!1,!0)).format()},tn.prototype.resolveObject=function(e){if(Qt.isString(e)){var t=new tn;t.parse(e,!1,!0),e=t}for(var n=new tn,r=Object.keys(this),i=0;i<r.length;i++){var o=r[i];n[o]=this[o]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),a=0;a<s.length;a++){var c=s[a];"protocol"!==c&&(n[c]=e[c])}return yn[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!yn[e.protocol]){for(var u=Object.keys(e),l=0;l<u.length;l++){var h=u[l];n[h]=e[h]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||bn[e.protocol])n.pathname=e.pathname;else{for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),n.pathname=f.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var d=n.pathname||"",p=n.search||"";n.path=d+p}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var b=n.pathname&&"/"===n.pathname.charAt(0),y=e.host||e.pathname&&"/"===e.pathname.charAt(0),g=y||b||n.host&&e.pathname,v=g,m=n.pathname&&n.pathname.split("/")||[],_=(f=e.pathname&&e.pathname.split("/")||[],n.protocol&&!yn[n.protocol]);if(_&&(n.hostname="",n.port=null,n.host&&(""===m[0]?m[0]=n.host:m.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===f[0]?f[0]=e.host:f.unshift(e.host)),e.host=null),g=g&&(""===f[0]||""===m[0])),y)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,m=f;else if(f.length)m||(m=[]),m.pop(),m=m.concat(f),n.search=e.search,n.query=e.query;else if(!Qt.isNullOrUndefined(e.search)){if(_)n.hostname=n.host=m.shift(),(R=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=R.shift(),n.host=n.hostname=R.shift());return n.search=e.search,n.query=e.query,Qt.isNull(n.pathname)&&Qt.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!m.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var w=m.slice(-1)[0],E=(n.host||e.host||m.length>1)&&("."===w||".."===w)||""===w,S=0,A=m.length;A>=0;A--)"."===(w=m[A])?m.splice(A,1):".."===w?(m.splice(A,1),S++):S&&(m.splice(A,1),S--);if(!g&&!v)for(;S--;S)m.unshift("..");!g||""===m[0]||m[0]&&"/"===m[0].charAt(0)||m.unshift(""),E&&"/"!==m.join("/").substr(-1)&&m.push("");var R,O=""===m[0]||m[0]&&"/"===m[0].charAt(0);_&&(n.hostname=n.host=O?"":m.length?m.shift():"",(R=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=R.shift(),n.host=n.hostname=R.shift()));return(g=g||n.host&&m.length)&&!O&&m.unshift(""),m.length?n.pathname=m.join("/"):(n.pathname=null,n.path=null),Qt.isNull(n.pathname)&&Qt.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},tn.prototype.parseHost=function(){var e=this.host,t=sn.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};var vn=Pt;vn.request=function(t,n){t="string"==typeof t?Zt(t):Kt(t);var r=-1===e.location.protocol.search(/^https?:$/)?"http:":"",i=t.protocol||r,o=t.hostname||t.host,s=t.port,a=t.path||"/";o&&-1!==o.indexOf(":")&&(o="["+o+"]"),t.url=(o?i+"//"+o:"")+(s?":"+s:"")+a,t.method=(t.method||"GET").toUpperCase(),t.headers=t.headers||{};var c=new St(t);return n&&c.on("response",n),c},vn.get=function(e,t){var n=vn.request(e,t);return n.end(),n},vn.ClientRequest=St,vn.IncomingMessage=Bt,vn.Agent=function(){},vn.Agent.defaultMaxSockets=4,vn.globalAgent=new vn.Agent,vn.STATUS_CODES=Yt,vn.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"];var mn;mn=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")};class _n{middleware=[];constructor(e){this._server=e,this._initMiddleware()}use(e){this.middleware.push(e)}_execute(e,t,n){const r=this.middleware.concat(),i=()=>{const o=r.shift();o?o(e,t,n,i):(t.write("HTTP/1.1 400 Bad Request\r\n\r"),t.destroy())};i()}_initMiddleware(){this._server.on("upgrade",((e,t,n)=>{this._execute(e,t,n)}))}}class wn extends et{constructor(e,t){super(),this._server=e||new(0,Pt.Server),this._socketServer=t||new(0,mn.WebSocketServer)({noServer:!0}),this._socketChain=new _n(this._server),this._init()}static _rejectClient(e){const{errorMessage:t,errorCode:n,data:r}=e;r.write(`HTTP/1.1 ${n} ${t}\r\n\r\n`),r.destroy()}listen(e,t){return this._server.listen(e,t)}useOnUpgrade(e){this._socketChain.use(e)}createEndpoint(e,t){const n=new Et(this._socketServer,t);return this._socketChain.use((async(t,r,i,o)=>{const s=t.url||"",a=this.generateEventRequest(e,s);if(!a)return o();n.authoriseConnection(t,r,i,a).catch((e=>wn._rejectClient(e)))})),n}_pingClients(e){e.on("connection",(e=>{e.isAlive=!0,e.on("pong",(()=>{e.isAlive=!0}))}));const t=setInterval((()=>{e.clients.forEach((e=>{if(!1===e.isAlive)return e.terminate();e.isAlive=!1,e.ping()}))}),3e4);e.on("close",(()=>clearInterval(t)))}_init(){this._server.on("error",(e=>{throw new tt("Server error",500,{error:e})})),this._server.on("listening",(()=>{this._pingClients(this._socketServer)}))}}class En{subscriptions=[];presenceSubject=new J;constructor(e,t,n){this.channel=e,this.params=t,this.socket=n,this.subject=new J,this.connectedSubject=new it(!1)}get isActive(){return this.connectedSubject.value}join(){if(this.connectedSubject.value)return this;const e=this.init().subscribe((e=>{this.connectedSubject.publish(!0),"PRESENCE"===e.action?this.presenceSubject.next(e.payload.presence):"MESSAGE"===e.action?this.subject.next(e):"KICKED_FROM_CHANNEL"===e.event&&this.leave()}));return this.subscriptions.push(e),this}leave(){this.connectedSubject.publish(!1),this.presenceSubject.complete(),this.subscriptions.forEach((e=>e.unsubscribe())),this.subscriptions=[],this.subject.complete()}onPresenceUpdate(e){const t=this.presenceSubject.subscribe(e);return this.subscriptions.push(t),t}onMessage(e){const t=this.subject.pipe((n=e=>"MESSAGE"===e.action,ee((function(e,t){var i=0;e.subscribe(te(t,(function(e){return n.call(r,e,i++)&&t.next(e)})))})))).subscribe((t=>e(t.event,t.payload)));var n,r;return this.subscriptions.push(t),t}broadcast(e,t){const n={channelName:this.channel,payload:t,event:e,action:dt.BROADCAST};this.socket.next(n)}broadcastFrom(e,t){const n={channelName:this.channel,payload:t,event:e,action:dt.BROADCAST_FROM};this.socket.next(n)}updatePresence(e){this.socket.next({action:dt.UPDATE_PRESENCE,channelName:this.channel,event:"PRESENCE",payload:e})}sendMessage(e,t,n){const r=Array.isArray(n)?n:[n],i={channelName:this.channel,payload:t,event:e,addresses:r,action:dt.SEND_MESSAGE_TO_USER};this.socket.next(i)}onConnectionChange(e){const t=this.connectedSubject.subscribe(e);return this.subscriptions.push(t),t}init(){return this.socket.multiplex((()=>({action:"JOIN_CHANNEL",channelName:this.channel,event:"JOIN_CHANNEL",payload:this.params})),(()=>({action:"LEAVE_CHANNEL",channelName:this.channel,event:"LEAVE_CHANNEL",payload:this.params})),(e=>e.channelName===this.channel))}}class Sn{socketState="CLOSED";constructor(e,t){let n;try{n=new URL(e)}catch(t){n=new URL(window.location.toString()),n.pathname=e}const r=new URLSearchParams(t);n.search=r.toString();const i="https:"===n.protocol?"wss:":"ws:";"wss:"!==n.protocol&&"ws:"!==n.protocol&&(n.protocol=i),this.address=n,this.channels=new lt}connect(){if("CLOSED"!==this.socketState)return;this.socketState="CONNECTING";const e=(t={url:this.address.toString(),openObserver:{next:()=>{this.socketState="OPEN"}},closeObserver:{next:()=>{this.socketState="CLOSED"}},closingObserver:{next:()=>{this.socketState="CLOSING"}}},new Q(t));var t;return this.socket=e,this.subscription=e.pipe(this._retryStrategy(100,1e3)).subscribe(),this}getState(){return this.socketState}createChannel(e,t){const n=this.channels.find((t=>t.channel===e));if(n)return n.doc;const r=new En(e,t||{},this.socket);return this.channels.set(r),r}onMessage(e){this.socket?.subscribe((t=>{t.event&&e(t.event,t.payload)}))}disconnect(){this.socket?.complete(),this.socket?.unsubscribe(),this.subscription?.unsubscribe(),this.socket=void 0,this.channels=new lt}_retryStrategy=(e,t)=>{return W((n=n=>{var r,i;return Le(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=we(e),r=Ge(e);return r.length?new $((function(e){var t=r.map((function(){return[]})),i=r.map((function(){return!1}));e.add((function(){t=i=null}));for(var o=function(o){de(r[o]).subscribe(te(e,(function(r){if(t[o].push(r),t.every((function(e){return e.length}))){var s=t.map((function(e){return e.shift()}));e.next(n?n.apply(void 0,f([],h(s))):s),t.some((function(e,t){return!e.length&&i[t]}))&&e.complete()}}),(function(){i[o]=!0,!t[o].length&&e.complete()})))},s=0;!e.closed&&s<r.length;s++)o(s);return function(){t=i=null}})):Ie}(function(e,t,n){if(null==t&&(t=e,e=0),t<=0)return Ie;var r=t+e;return new $(n?function(t){var i=e;return n.schedule((function(){i<r?(t.next(i++),this.schedule()):t.complete()}))}:function(t){for(var n=e;n<r&&!t.closed;)t.next(n++);t.complete()})}(1,e),n).pipe(re((([e,t])=>e)),re((e=>e*e)),(r=e=>He(e*t),ee((function(e,t){var n=null,o=0,s=!1,a=function(){return s&&!n&&t.complete()};e.subscribe(te(t,(function(e){null==n||n.unsubscribe();var s=0,c=o++;de(r(e,c)).subscribe(n=te(t,(function(n){return t.next(i?i(e,n,c,s++):n)}),(function(){n=null,a()})))}),(function(){s=!0,a()})))})))),Me(new Error("Could not connect to server")).pipe(ee((function(e,t){e.subscribe(te(t,(function(e){t.next(Ye.createNext(e))}),(function(){t.next(Ye.createComplete()),t.complete()}),(function(e){t.next(Ye.createError(e)),t.complete()})))})),function(e,t){void 0===t&&(t=qe);var n=He(e,t);return Ke((function(){return n}))}(1e3),ee((function(e,t){e.subscribe(te(t,(function(e){return Ze(e,t)})))}))))},ee((function(e,t){var r,i,o=!1,s=function(){r=e.subscribe(te(t,void 0,void 0,(function(e){i||(i=new J,n(i).subscribe(te(t,(function(){return r?s():o=!0})))),i&&i.next(e)}))),o&&(r.unsubscribe(),r=null,o=!1,s())};s()}))));var n}}const An=(e,t,n,r)=>{const i=document.createElement("div");i.innerHTML=t.trim();const o=i.querySelector("#"+n),s=e.querySelector("#"+n);o&&s&&o.replaceWith(s.cloneNode(!0));const a=i.firstElementChild;Rn(e,a),r&&r.pageTitle&&(document.title=r.pageTitle)},Rn=(e,t)=>{if(e instanceof Text&&t instanceof Text&&e.textContent!==t.textContent)return void e.replaceWith(t.cloneNode(!0));if(e instanceof Text&&t instanceof Element)return void e.replaceWith(t.cloneNode(!0));if(e instanceof Element&&t instanceof Text)return void e.replaceWith(t.cloneNode(!0));if(e.tagName!==t.tagName)return void e.replaceWith(t.cloneNode(!0));for(const n in t.attributes){const r=t.attributes[n];r&&r.name&&r.value&&(e.hasAttribute(r.name)&&e.getAttribute(r.name)===r.value||e.setAttribute(r.name,r.value))}for(const n in e.attributes){const r=e.attributes[n];r&&r.name&&r.value&&(t.hasAttribute(r.name)?t.hasAttribute(r.name)&&t.getAttribute(r.name)!==r.value&&e.setAttribute(r.name,t.getAttribute(r.name)):e.removeAttribute(r.name))}const n=Math.max(e.childNodes.length,t.childNodes.length);for(let r=0;r<n;r++){const n=e.childNodes[r],i=t.childNodes[r];if(n&&i)Rn(n,i);else{if(n)return On(e,r);i&&e.appendChild(i.cloneNode(!0))}}},On=(e,t)=>{const n=e.childNodes;for(let e=n.length-1;e>=t;e--){n[e].remove()}},xn=(e,t,n)=>{const r=new CustomEvent(e,{detail:t,bubbles:!0,cancelable:!0});n?n.dispatchEvent(r):window.dispatchEvent(r)},Tn=(e,t,n,r)=>{const i=t.closest("[pond-router]");let o=null;if(r){o=r.target.value}if(i){const r=i.getAttribute("pond-router"),s=t.getAttribute(n),a=t.getAttribute("pond-data-id");r&&s&&e.broadcastFrom(`event/${r}`,{type:s,value:o,dataId:a})}},Nn=async e=>{xn("navigate-start",{location:e,shallow:!1}),history.pushState(null,"",e),await Cn(e),xn("navigate-end",{location:e,shallow:!1})};window.addEventListener("popstate",(async()=>{xn("navigate-start",{location:location.pathname,shallow:!1}),await Cn(location.pathname),xn("navigate-end",{location:location.pathname,shallow:!1})}));const Cn=async e=>{const t={"Content-Type":"text/html",Accept:"text/html","x-csrf-token":window.token,"x-router-request":"true",method:"GET"},n=await fetch(e,{headers:t}),r=n.headers;if(r.has("x-router-action")){const e=r.get("x-router-action");if(e){const t=r.get("x-router-path"),n=r.get("x-page-title"),i=r.get("x-flash-message");await Pn(t,e,n,i)}}else{const e=r.get("x-router-container"),t=r.get("x-page-title"),i=r.get("x-flash-message"),o=await n.text();Ln(e,o,t,i)}},kn=e=>{e.delegateEvent("a","click",(async(e,t)=>{t.preventDefault();const n=e.href;await Nn(n)}))},Pn=async(e,t,n,r)=>{switch(t){case"replace":xn("navigate-start",{location:e,shallow:!1}),history.replaceState(null,"",e),xn("navigate-end",{location:e,shallow:!1});break;case"redirect":await Nn(e)}n&&(document.title=n),r&&xn("flash-message",{flashMessage:r})},Ln=(e,t,n,r)=>{const i=document.querySelector(e);if(i){const e=document.createElement("div");e.innerHTML=t;const o=e.firstElementChild,s=o.getAttribute("pond-router");s&&i.setAttribute("pond-router",s),Rn(i,o),n&&(document.title=n),r&&xn("flash-message",{flashMessage:r})}},In=(e,t)=>{const n=e=>"[object Function]"===Object.prototype.toString.call(e),r=e=>"[object Date]"===Object.prototype.toString.call(e),i=e=>!(e=>"[object Object]"===Object.prototype.toString.call(e))(e)&&!(e=>"[object Array]"===Object.prototype.toString.call(e))(e),o=(e,t)=>{if(n(e)||n(t))throw"Invalid argument. Function given, object expected.";if(i(e)||i(t)){const n=(s=e)===(a=t)||r(s)&&r(a)&&s.getTime()===a.getTime()?"unchanged":void 0===s?"created":void 0===a?"deleted":"updated";return"updated"===n?{type:n,data:t}:{type:n,data:void 0===e?t:e}}var s,a;const c={};for(const r in e){if(n(e[r]))continue;let i;void 0!==t[r]&&(i=t[r]),c[r]=o(e[r],i)}for(const e in t)n(t[e])||void 0!==c[e]||(c[e]=o(void 0,t[e]));return c};return o(e,t)},Mn=e=>{const t={};for(const n in e)if(void 0!==e[n]&&null!==e[n])if("created"===e[n].type||"updated"===e[n].type)t[n]=e[n].data;else if("deleted"===e[n].type)t[n]=null;else if("object"==typeof e[n]){const r=Mn(e[n]);r&&Object.keys(r).length>0&&(t[n]=r)}return t},jn=(e,t)=>{if(void 0===e)return t;if(void 0===t)return e;for(const n in t)t[n]instanceof Object?e[n]=jn(e[n],t[n]):null===t[n]?delete e[n]:e[n]=t[n];return e instanceof Array?e.filter((e=>null!=e)):e},Dn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},Un=new RegExp(Object.keys(Dn).join("|"),"g");function Bn(e,t){return null==t&&(t=","),e.length<=0?new Fn([""],[]):new Fn(["",...Array(e.length-1).fill(t),""],e)}function qn(e){return null==e?"":e instanceof Fn?e.toString():Array.isArray(e)?Bn(e,"").toString():String(e).replace(Un,(e=>Dn[e]))}class Fn{constructor(e,t){this.statics=e,this.dynamics=t}toString(){let e=this.statics[0];for(let t=0;t<this.dynamics.length;t++)this.dynamics[t]instanceof Fn?e+=this.dynamics[t].toString()+this.statics[t+1]:Array.isArray(this.dynamics[t])?e+=Bn(this.dynamics[t],"").toString()+this.statics[t+1]:"object"==typeof this.dynamics[t]?e+=this.parsedHtmlToString(this.dynamics[t])+this.statics[t+1]:e+=qn(this.dynamics[t])+this.statics[t+1];return e}getParts(){const e={s:this.statics};for(let t=0;t<this.dynamics.length;t++)this.dynamics[t]instanceof Fn?e[t]=this.dynamics[t].getParts():Array.isArray(this.dynamics[t])?e[t]=Bn(this.dynamics[t],"").getParts():void 0===this.dynamics[t]?e[t]=null:e[t]=this.dynamics[t];return e}parsedHtmlToString(e){const t=e;let n="";if(Array.isArray(t))return Bn(t,"").toString();if(t?.s?.length>0){const r=t.s.filter((e=>null!=e));n=t.s[0];for(let i=0;i<r.length-1;i++)"object"==typeof t[i]?n+=this.parsedHtmlToString(e[i])+t.s[i+1]:n+=qn(e[i])+t.s[i+1]}return n}differentiate(e){const t=e.getParts(),n=this.getParts(),r=In(n,t);return Mn(r)}reconstruct(e){const t=jn(this.getParts(),e);return this.parse(t)}parse(e){const t=e,n=t.s||[""];delete t.s;const r=Object.values(t).filter((e=>null!=e));return new Fn(n,r)}}function Hn(e,...t){return new Fn(e,t)}var Wn={};t(Wn,"PondSocket",(()=>wn)),t(Wn,"PondSocket",(()=>wn));It=i("ePtPP");function Vn(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function $n(e,t){for(var n,r="",i=0,o=-1,s=0,a=0;a<=e.length;++a){if(a<e.length)n=e.charCodeAt(a);else{if(47===n)break;n=47}if(47===n){if(o===a-1||1===s);else if(o!==a-1&&2===s){if(r.length<2||2!==i||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){var c=r.lastIndexOf("/");if(c!==r.length-1){-1===c?(r="",i=0):i=(r=r.slice(0,c)).length-1-r.lastIndexOf("/"),o=a,s=0;continue}}else if(2===r.length||1===r.length){r="",i=0,o=a,s=0;continue}t&&(r.length>0?r+="/..":r="..",i=2)}else r.length>0?r+="/"+e.slice(o+1,a):r=e.slice(o+1,a),i=a-o-1;o=a,s=0}else 46===n&&-1!==s?++s:s=-1}return r}var Gn={resolve:function(){for(var e,t="",n=!1,r=arguments.length-1;r>=-1&&!n;r--){var i;r>=0?i=arguments[r]:(void 0===e&&(e=It.cwd()),i=e),Vn(i),0!==i.length&&(t=i+"/"+t,n=47===i.charCodeAt(0))}return t=$n(t,!n),n?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(e){if(Vn(e),0===e.length)return".";var t=47===e.charCodeAt(0),n=47===e.charCodeAt(e.length-1);return 0!==(e=$n(e,!t)).length||t||(e="."),e.length>0&&n&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return Vn(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,t=0;t<arguments.length;++t){var n=arguments[t];Vn(n),n.length>0&&(void 0===e?e=n:e+="/"+n)}return void 0===e?".":Gn.normalize(e)},relative:function(e,t){if(Vn(e),Vn(t),e===t)return"";if((e=Gn.resolve(e))===(t=Gn.resolve(t)))return"";for(var n=1;n<e.length&&47===e.charCodeAt(n);++n);for(var r=e.length,i=r-n,o=1;o<t.length&&47===t.charCodeAt(o);++o);for(var s=t.length-o,a=i<s?i:s,c=-1,u=0;u<=a;++u){if(u===a){if(s>a){if(47===t.charCodeAt(o+u))return t.slice(o+u+1);if(0===u)return t.slice(o+u)}else i>a&&(47===e.charCodeAt(n+u)?c=u:0===u&&(c=0));break}var l=e.charCodeAt(n+u);if(l!==t.charCodeAt(o+u))break;47===l&&(c=u)}var h="";for(u=n+c+1;u<=r;++u)u!==r&&47!==e.charCodeAt(u)||(0===h.length?h+="..":h+="/..");return h.length>0?h+t.slice(o+c):(o+=c,47===t.charCodeAt(o)&&++o,t.slice(o))},_makeLong:function(e){return e},dirname:function(e){if(Vn(e),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,i=!0,o=e.length-1;o>=1;--o)if(47===(t=e.charCodeAt(o))){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"//":e.slice(0,r)},basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');Vn(e);var n,r=0,i=-1,o=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var s=t.length-1,a=-1;for(n=e.length-1;n>=0;--n){var c=e.charCodeAt(n);if(47===c){if(!o){r=n+1;break}}else-1===a&&(o=!1,a=n+1),s>=0&&(c===t.charCodeAt(s)?-1==--s&&(i=n):(s=-1,i=a))}return r===i?i=a:-1===i&&(i=e.length),e.slice(r,i)}for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!o){r=n+1;break}}else-1===i&&(o=!1,i=n+1);return-1===i?"":e.slice(r,i)},extname:function(e){Vn(e);for(var t=-1,n=0,r=-1,i=!0,o=0,s=e.length-1;s>=0;--s){var a=e.charCodeAt(s);if(47!==a)-1===r&&(i=!1,r=s+1),46===a?-1===t?t=s:1!==o&&(o=1):-1!==t&&(o=-1);else if(!i){n=s+1;break}}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===n+1?"":e.slice(t,r)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var n=t.dir||t.root,r=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+r:n+e+r:r}("/",e)},parse:function(e){Vn(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;var n,r=e.charCodeAt(0),i=47===r;i?(t.root="/",n=1):n=0;for(var o=-1,s=0,a=-1,c=!0,u=e.length-1,l=0;u>=n;--u)if(47!==(r=e.charCodeAt(u)))-1===a&&(c=!1,a=u+1),46===r?-1===o?o=u:1!==l&&(l=1):-1!==o&&(l=-1);else if(!c){s=u+1;break}return-1===o||-1===a||0===l||1===l&&o===a-1&&o===s+1?-1!==a&&(t.base=t.name=0===s&&i?e.slice(1,a):e.slice(s,a)):(0===s&&i?(t.name=e.slice(1,o),t.base=e.slice(1,a)):(t.name=e.slice(s,o),t.base=e.slice(s,a)),t.ext=e.slice(o,a)),s>0?t.dir=e.slice(0,s-1):i&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};Gn.posix=Gn;i("1DJXa");i("1DJXa");i("1DJXa");const zn=(e,t)=>{const n={},r={},i=t=>{const i=t.getAttribute("pond-router");i&&!n[i]&&(n[i]=e.onMessage((async(e,n)=>{if(n.path===i){if("rendered"===e){const e=Hn``.parse(n.rendered);r[i]=e;const o=e.toString();An(t,o,i,n.headers)}if("updated"===e&&r[i]){const e=r[i].reconstruct(n.rendered);r[i]=e;const o=e.toString();An(t,o,i,n.headers)}n.headers&&(n.headers.pageTitle?document.title=n.headers.pageTitle:n.headers.flashMessage&&xn("flash-message",{flashMessage:n.headers.flashMessage}))}})),e.broadcastFrom(`mount/${i}`,{}))},o=(t,i)=>{const o=i;o&&n[o]&&(e.broadcastFrom(`unmount/${o}`,{}),n[o].unsubscribe(),delete n[o],delete r[o])};t.watch("[pond-router]",{onAdd:i,onRemove:o,onUpdated:(t,r)=>{const s=t.getAttribute("pond-router");r&&s?r!==s?(o(0,r),i(t)):n[s]&&e.broadcastFrom(`update/${s}`,{}):r&&n[r]?o(0,r):s&&!n[s]&&i(t)}})},Jn=e=>{e.onMessage((async(e,t)=>{if("router"===e){const{action:e,path:n}=t;await Pn(n,e)}else"emit"===e&&xn(t.event,t.data)}))};class Kn{_modifiers={};constructor(){const e=new MutationObserver((e=>{for(let t=0;t<e.length;t++){const n=e[t];switch(n.type){case"childList":for(let e=0;e<n.removedNodes.length;e++){const t=n.removedNodes[e];if(t instanceof HTMLElement){const e=t;for(const t in this._modifiers)if(e.matches(t)){this._modifiers[t].forEach((t=>{t.onRemove&&t.onRemove(e,null)}))}}}for(let e=0;e<n.addedNodes.length;e++){const t=n.addedNodes[e];if(t instanceof HTMLElement){const e=t;this._addNewElement(e)}}break;case"attributes":const e=n.target,t=`[${n.attributeName}]`;for(const r in this._modifiers)if(t===r||e.matches(r))if(null===n.oldValue){this._modifiers[r].forEach((t=>{t.onAdd&&t.onAdd(e,null)}))}else{const t=this._modifiers[r],i=e.getAttribute(n.attributeName);t.forEach((t=>{i?t.onUpdated&&t.onUpdated(e,n.oldValue):t.onRemove&&t.onRemove(e,n.oldValue)}))}}}}));e.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeOldValue:!0}),this._observer=e}watch(e,t){const n=document.querySelectorAll(e);for(let e=0;e<n.length;e++){const r=n[e];t.onAdd&&t.onAdd(r,null)}const r=this._modifiers[e]||[];r.push(t),this._modifiers[e]=r}unwatch(e){delete this._modifiers[e]}isWatching(e){return!!this._modifiers[e]}addEventListener(e,t,n){this.watch(e,{onAdd:e=>{e.addEventListener(t,(t=>{n(e,t)}))},onRemove:e=>{e.removeEventListener(t,(t=>{n(e,t)}))}})}delegateEvent(e,t,n){document.body.addEventListener(t,(t=>{const r=t.target;if(r.tagName.toLowerCase()===e.toLowerCase())return n(r,t);const i=r.parentElement;if(i&&i.tagName.toLowerCase()===e.toLowerCase())return n(i,t);const o=r.firstElementChild;return o&&o.tagName.toLowerCase()===e.toLowerCase()?n(o,t):void 0}))}shutdown(){for(const e in this._modifiers)this.unwatch(e);this._observer.disconnect()}_addNewElement(e){for(const t in this._modifiers)if(e.matches(t)){this._modifiers[t].forEach((t=>{t.onAdd&&t.onAdd(e,null)}))}for(let t=0;t<e.children.length;t++)this._addNewElement(e.children[t])}}const Xn=(e,t)=>{((e,t)=>{t.addEventListener("[pond-click]","click",(t=>{Tn(e,t,"pond-click")}))})(e,t),((e,t)=>{t.addEventListener("[pond-mouseenter]","mouseenter",(t=>{Tn(e,t,"pond-mouseenter")}))})(e,t),((e,t)=>{t.addEventListener("[pond-mouseleave]","mouseleave",(t=>{Tn(e,t,"pond-mouseleave")}))})(e,t),((e,t)=>{t.addEventListener("[pond-mousemove]","mousemove",(t=>{Tn(e,t,"pond-mousemove")}))})(e,t),((e,t)=>{t.addEventListener("[pond-mousedown]","mousedown",(t=>{Tn(e,t,"pond-mousedown")}))})(e,t),((e,t)=>{t.addEventListener("[pond-mouseup]","mouseup",(t=>{Tn(e,t,"pond-mouseup")}))})(e,t),((e,t)=>{t.addEventListener("[pond-double-click]","dblclick",(t=>{Tn(e,t,"pond-double-click")}))})(e,t)},Yn=(e,t)=>{((e,t)=>{t.addEventListener("[pond-keyup]","keyup",((t,n)=>{Tn(e,t,"pond-keyup",n)}))})(e,t),((e,t)=>{t.addEventListener("[pond-keydown]","keydown",((t,n)=>{Tn(e,t,"pond-keydown",n)}))})(e,t),((e,t)=>{t.addEventListener("[pond-keypress]","keypress",((t,n)=>{Tn(e,t,"pond-keypress",n)}))})(e,t),((e,t)=>{t.addEventListener("[pond-change]","change",((t,n)=>{Tn(e,t,"pond-change",n)}))})(e,t),((e,t)=>{t.addEventListener("[pond-window-keyup]","keyup",((t,n)=>{const r=t.closest("[pond-router]"),i=n.key;if(r){const n=r.getAttribute("pond-router"),o=t.getAttribute("pond-window-keyup");n&&o&&i&&e.broadcastFrom(`event/${n}`,{type:o,key:i})}}))})(e,t),((e,t)=>{t.addEventListener("[pond-window-keydown]","keydown",((t,n)=>{const r=t.closest("[pond-router]"),i=n.key;if(r){const n=r.getAttribute("pond-router"),o=t.getAttribute("pond-window-keydown");n&&o&&i&&e.broadcastFrom(`event/${n}`,{type:o,key:i})}}))})(e,t),((e,t)=>{t.addEventListener("[pond-window-keypress]","keypress",((t,n)=>{const r=t.closest("[pond-router]"),i=n.key;if(r){const n=r.getAttribute("pond-router"),o=t.getAttribute("pond-window-keypress");n&&o&&i&&e.broadcastFrom(`event/${n}`,{type:o,key:i})}}))})(e,t)},Zn=(e,t)=>{((e,t)=>{t.addEventListener("[pond-focus]","focus",(t=>{const n=t.closest("[pond-router]");if(n){const r=n.getAttribute("pond-router"),i=t.getAttribute("pond-focus");r&&i&&e.broadcastFrom(`event/${r}`,{type:i})}}))})(e,t),((e,t)=>{t.addEventListener("[pond-blur]","blur",(t=>{const n=t.closest("[pond-router]");if(n){const r=n.getAttribute("pond-router"),i=t.getAttribute("pond-blur");r&&i&&e.broadcastFrom(`event/${r}`,{type:i})}}))})(e,t),((e,t)=>{t.addEventListener("[pond-change]","change",(t=>{const n=t.closest("[pond-router]");if(n){const r=n.getAttribute("pond-router"),i=t.getAttribute("pond-change");r&&i&&e.broadcastFrom(`event/${r}`,{type:i})}}))})(e,t),((e,t)=>{t.addEventListener("[pond-input]","input",(t=>{const n=t.closest("[pond-router]");if(n){const r=n.getAttribute("pond-router"),i=t.getAttribute("pond-input");r&&i&&e.broadcastFrom(`event/${r}`,{type:i})}}))})(e,t),((e,t)=>{t.addEventListener("[pond-submit]","submit",((t,n)=>{n.preventDefault();const r=t.closest("[pond-router]");if(r){const n=r.getAttribute("pond-router"),i=t.getAttribute("pond-submit");n&&i&&e.broadcastFrom(`event/${n}`,{type:i})}}))})(e,t)},Qn=()=>{const e=new Sn("/live");e.connect();let t=!1;e.onMessage(((n,r)=>{if("token"===n&&!t){window.token=r.csrfToken,t=!0;const n=new Kn,i=e.createChannel(`/${r.nanoId}`,{clientId:r.csrfToken});i.join();let o=!1;i.onConnectionChange((e=>{e&&(zn(i,n),Xn(i,n),Yn(i,n),Zn(i,n),kn(n),Jn(i),o||(o=!0,xn("pondReady",i)))}))}}))};window.addEventListener("load",(()=>{Qn()}))})();